<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
                      "http://www.w3.org/TR/WD-html-in-xml/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en"><head><link type="text/css"
            rel="stylesheet"
            href="../cppdoc.css" />
<title>IlcConstraintI</title>
</head><body><div
                class="ibm-access"><a href="#ibm-content"><img
                    class="ibm-access" src="../whitepixel.png"
            alt="Skip to main content" /></a></div><table
            class="navigation-bar" border="0" cellpadding="0"
                        cellspacing="3"><tr><td><a
                        class="navigation-item"
                        href="../overview.html">Overview</a></td><td><a
                        class="navigation-item"
                        href="../optim.cpoptimizer.extensions/group.html">Group</a></td><td><a
                        class="navigation-item"
                        href="../tree.html">Tree</a></td><td><a
                        class="navigation-item"
                        href="../graph.html">Graph</a></td><td><a
                        class="navigation-item"
                        href="../deprecated.html">Deprecated</a></td><td><a
                        class="navigation-item"
                        href="../index/index.html">Index</a></td><td><a
                        class="navigation-item"
            href="../concepts.html">Concepts</a></td></tr></table><div
                align="right"><a href="../index.html"
                target="_top">FRAMES</a> <a
                href="../classes/IlcConstraintI.html"
            target="_top">NO FRAMES</a></div><hr /><a
            name="ibm-content"></a><h1>Class IlcConstraintI</h1><div
                class="definition-file"><strong>Definition file: </strong><span
            class="definition-file">ilcp/cpext.h</span></div><div
                class="include-files"><strong>Include file: </strong><span
                class="include-file">&lt;ilcp/cpext.h&gt; </span></div><div><img
                src="IlcConstraintI.png" border="0"
                usemap="#svg_map_IlcConstraintI"
                    alt="Map of IlcConstraintI"><map
                        name="svg_map_IlcConstraintI"><area
                        href="../classes/IlcConstraintI.html"
                        shape="rect" alt="IlcConstraintI"
                        coords="10.0,37.6357421875,81.0,55.271484375" /><area
                        href="../classes/IlcConstraintI.html"
                        shape="rect" alt="IlcConstraintI"
                        coords="10.0,37.6357421875,81.0,55.271484375" /><area
                        href="../classes/IlcDemonI.html" shape="rect"
                        alt="IlcDemonI"
            coords="55.5,10.0,126.5,27.6357421875" /></map></img></div>
The implementation class for user-defined constraints.
    <div
                    class="description"><p>A constraint is an object in CP Optimizer. Like other entities in CP Optimizer, a
 constraint is implemented by means of two classes: a handle class and an
 implementation class. In other words, an instance of the class
 <code>IlcConstraint</code> (a handle) contains a data member (the handle
 pointer) that points to an instance of the class <code>IlcConstraintI</code>
 (its implementation object).</p><p>Two member functions in this class actually implement the semantics of a
 constraint: <code>isViolated</code> and <code>propagate</code>. When you are
 defining a new class of constraint, you must define the member function
 <code>propagate</code>. That member function defines how the domain of a
 constrained variable must be reduced by the constraint. (Defining
 <code>isViolated</code> is not usually mandatory. Its definition is
 mandatory if you want to use the new class of constraint as a
 <em>metaconstraint</em>, for example in a Boolean formula.)</p><p>A constraint must be stored when it is posted so that it can be used by
 the propagation algorithm later. The member function <code>post</code> must
 be defined for that purpose. In other words, if you are defining a new class
 of constraint, when you define the implementation class for it, you must
 define this <code>post</code> member function as well.</p><p>A constraint can be used in a Boolean formula. In other words, you can
 combine constraints by means of the usual Boolean operators to produce other
 constraints. In order to use a constraint in that way, if you are defining a
 new class of constraints, then you must define the member functions
 <code>metaPost</code>, <code>makeOpposite</code>, and
 <code>isViolated</code>.</p><p>For more information, see the concepts 
 <a
                    href="../propagation.html">Propagation in CP Optimizer</a>
 and <a
            href="../propagationevents.html">Propagation events in CP Optimizer</a>.</p></div><p
            class="see-also-title">See Also:</p><p
                class="see-also-links"><a
                href="../classes/IlcConstraint.html">IlcConstraint</a>, <a
                href="../macros/ILCCTDEMON0.html">ILCCTDEMON0</a>, <a
                href="../classes/IlcDemonI.html">IlcDemonI</a>, <a
            href="../classes/IlcGoalI.html">IlcGoalI</a></p><table
            class="summary" border="1" cellpadding="3" cellspacing="0"
                    width="100%"><tr><th
                    colspan="2">Method Summary</th></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public virtual void</code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_display">display</a>(ostream &amp;) const</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public void</code></td><td
                            width="100%"><code><a
                            href="../classes/IlcConstraintI.html#method_fail">fail</a>(<a
                    href="../typedefs/IlcAny.html">IlcAny</a> label=0)</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public </code></td><td
                            width="100%"><code><a
                            href="../classes/IlcConstraintI.html#method_IlcConstraintI">IlcConstraintI</a>(<a
                    href="../classes/IloCP.html">IloCP</a> cp)</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                            class="prototype">public virtual <a
                    href="../typedefs/IlcBool.html">IlcBool</a></code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_isAConstraint">isAConstraint</a>() const</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                            class="prototype">public virtual <a
                    href="../typedefs/IlcBool.html">IlcBool</a></code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_isViolated">isViolated</a>() const</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public virtual IlcConstraintI *</code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_makeOpposite">makeOpposite</a>() const</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public virtual void</code></td><td
                            width="100%"><code><a
                            href="../classes/IlcConstraintI.html#method_metaPostDemon">metaPostDemon</a>(<a
                    href="../classes/IlcDemonI.html">IlcDemonI</a> * demon)</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public virtual void</code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_post">post</a>()</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public virtual void</code></td><td
                            width="100%"><code><a
                    href="../classes/IlcConstraintI.html#method_propagate">propagate</a>()</code></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public void</code></td><td
                            width="100%"><code><a
                            href="../classes/IlcConstraintI.html#method_push">push</a>(<a
                        href="../typedefs/IlcInt.html">IlcInt</a> priority)</code><p
                            class="tmargin1"><span
                    class="deprecated-summary"><strong>Deprecated:</strong><em>
Since V12.6.0.
      </em></span></p></td></tr><tr><td
                    valign="top" align="right" nowrap=""><code
                    class="prototype">public void</code></td><td
                            width="100%"><code><a
            href="../classes/IlcConstraintI.html#method_push">push</a>()</code></td></tr></table><table
            class="summary" border="1" cellpadding="3" cellspacing="0"
                    width="100%"><tr><th
                            colspan="1">Inherited Methods from <code><a
                    href="../classes/IlcDemonI.html">IlcDemonI</a></code></th></tr><tr><td
                            width="100%"><code><a
                            href="../classes/IlcDemonI.html#method_getConstraintI"></a><a
                            href="../classes/IlcDemonI.html#method_getConstraintI">getConstraintI</a>, <a
                            href="../classes/IlcDemonI.html#method_getCP"></a><a
                            href="../classes/IlcDemonI.html#method_getCP">getCP</a>, <a
                            href="../classes/IlcDemonI.html#method_IlcDemonI"></a><a
                            href="../classes/IlcDemonI.html#method_IlcDemonI">IlcDemonI</a>, <a
                            href="../classes/IlcDemonI.html#method_isAConstraint"></a><a
                            href="../classes/IlcDemonI.html#method_isAConstraint">isAConstraint</a>, <a
                            href="../classes/IlcDemonI.html#method_propagate"></a><a
            href="../classes/IlcDemonI.html#method_propagate">propagate</a></code></td></tr></table><table
            border="1" cellspacing="0" width="100%"><tr><th
                colspan="0">Method Detail</th></tr></table><h3><a
            name="method_IlcConstraintI">IlcConstraintI</a></h3><div
                class="prototype">public  <span
                class="function-name">IlcConstraintI</span>(<a
                href="../classes/IloCP.html">IloCP</a> <span
            class="parameter-name">cp</span>)</div><div
                class="description"><p>This constructor creates a constraint implementation. This constructor should <em>not</em>
 be called directly because this is an <em>abstract</em> class. This constructor is called
 automatically in the constructors of its subclasses.</p></div><hr /><h3><a
            name="method_display">display</a></h3><div
                class="prototype">public virtual void <span
            class="function-name">display</span>(ostream &amp;) const</div><div
                class="description"><p>By default, this virtual member function puts the name of the invoking constraint (if it has
 a name) on the output stream indicated by its argument; if the invoking constraint has no name, this
 virtual member function puts the string <code>IlcConstraintI</code> on that stream. When you define
 a new class of constraint, of course, you can redefine this behavior.</p></div><hr /><h3><a
            name="method_fail">fail</a></h3><div
                class="prototype">public void <span
                class="function-name">fail</span>(<a
                href="../typedefs/IlcAny.html">IlcAny</a> <span
                class="parameter-name">label</span>=<span
            class="parameter-name">0</span>)</div><div
                class="description"><p>This member function causes the invoking constraint
    to fail at the choice point indicated by <code>label</code>.</p></div><hr /><h3><a
            name="method_isAConstraint">isAConstraint</a></h3><div
                class="prototype">public virtual <a
                href="../typedefs/IlcBool.html">IlcBool</a> <span
            class="function-name">isAConstraint</span>() const</div><div
                class="description"><p>This virtual member function is overloaded from <code>IlcDemon</code>
    to return <code>IloTrue</code>.</p></div><hr /><h3><a
            name="method_isViolated">isViolated</a></h3><div
                class="prototype">public virtual <a
                href="../typedefs/IlcBool.html">IlcBool</a> <span
            class="function-name">isViolated</span>() const</div><div
                        class="description"><p>If this member function returns <code>IlcTrue</code>, the invoking constraint cannot be satisfied.
 This member function may return <code>IlcFalse</code> even if the constraint can <em>not</em> be satisfied.
 However, it should <em>never</em> return <code>IlcTrue</code> if there is a possibility of satisfying the
 constraint. This provision is made for cases where it can be computationally expensive to determine whether
 the constraint can be satisfied or not; in such a case, the function should return <code>IlcFalse</code>.
 Consistent with this remark, the default behavior defined in the class <code>IlcConstraintI</code> for this
 member function is to return <code>IlcFalse</code>.</p><p>Since this virtual member function implements part of the semantics of an invoking constraint, it is not
 mandatory to redefine it in all cases when you define a new class of constraint. It is mandatory if you want
 to use instances of the new class in Boolean expressions, as explained about logical Boolean operators for the
 class <code><a
                href="../classes/IlcConstraint.html">IlcConstraint</a></code>.</p></div><hr /><h3><a
            name="method_makeOpposite">makeOpposite</a></h3><div
                class="prototype">public virtual IlcConstraintI * <span
            class="function-name">makeOpposite</span>() const</div><div
                        class="description"><p>The negation of a constraint must also be a constraint. Semantically, this virtual member
 function expresses that principle. It is called to create the negation of the invoking constraint.
 This member function is called only once by CP Optimizer. CP Optimizer stores its results in order to avoid
 unnecessary computations.</p><p>This virtual member function must be defined when you define a new class of constraint if you
 want to use instances of the constraint in Boolean expressions, as explained about logical Boolean
 operators for the class <code><a
                href="../classes/IlcConstraint.html">IlcConstraint</a></code>.</p></div><hr /><h3><a
            name="method_metaPostDemon">metaPostDemon</a></h3><div
                class="prototype">public virtual void <span
                class="function-name">metaPostDemon</span>(<a
                href="../classes/IlcDemonI.html">IlcDemonI</a> * <span
            class="parameter-name">demon</span>)</div><div
                        class="description"><p>When a Boolean expression is posted on constraints, the expression has to be examined whenever the truth
 value of one of the constraints appearing in it changes. That is, a constraint is posted on the constraints
 appearing in the expression. Since it is a constraint on constraints, we call it a <em>metaconstraint</em>.
 The virtual member function <code>metaPostDemon</code> must be defined when you are defining a new class of
 constraints if you plan to use instances of the new class in Boolean expressions, as explained about logical
 Boolean operators for the class <code><a
                href="../classes/IlcConstraint.html">IlcConstraint</a></code>.</p><p>This virtual member function is called to post its argument, a metaconstraint, on the invoking constraint.
 The metaconstraint should be associated with all the propagation events of the expressions appearing in the
 invoking constraint that may result in the unsatisfiability of the invoking constraint. Normally, these
 propagation events are the same events that are used in the <code>post</code> member function.</p><p>Thus the implementation of <code>metaPostDemon</code> is very similar to the implementation of
 <code>post</code>. The main difference is that <code>metaPostDemon</code> associates propagation events with
 the <em>demon</em> passed as an argument, whereas <code>post</code> associates propagation events with the
 invoking <em>constraint</em>.</p></div><hr /><h3><a
            name="method_post">post</a></h3><div
                class="prototype">public virtual void <span
            class="function-name">post</span>()</div><div
                class="description"><p>A constraint must be stored when it is posted so that it can be used by the propagation
 algorithm later. This member function must be defined for that purpose. In other words, if
 you are defining a new class of constraint, when you define the implementation class for it,
 you must define this pure virtual member function. It is called to attach the invoking constraint
 to the constrained variables that the constraint involves. </p><p>This member function must associate the invoking constraint with propagation events triggered
 by the variables that it is constraining. This association is carried out by the member functions
 <code>whenValue</code>, <code>whenDomain</code>, <code>whenRange</code> (member functions of the
 classes <code>IlcIntVar</code>, <code>IlcFloatVar</code>, etc.). </p><p>We strongly recommend that you do <em>not</em> modify variables in the scope of this member function.
 In other words, you should <em>not</em> call a modifier on a constrained variable within your definition
 of this virtual member function. Instead, you should make such changes (if they are necessary in your
 application) in your definition of the <code>propagate</code> member function.</p></div><hr /><h3><a
            name="method_propagate">propagate</a></h3><div
                class="prototype">public virtual void <span
            class="function-name">propagate</span>()</div><div
                        class="description"><p>This pure virtual member function must be redefined when you define a new class of
 constraints. It defines how the domains of constrained variables must be reduced by the
 invoking constraint. It is called by the constraint propagation algorithm in order to
 execute the propagation of the invoking constraint. This member function should reduce
 the domains of the constrained variables involved in the invoking constraint by removing
 the values that cannot satisfy the invoking constraint.</p><p>While there is an active demon, you must <em>not</em> start another search in the same
 optimizer (the instance of <code><a
                        href="../classes/IloCP.html">IloCP</a></code> in which the invoking
 constraint exists). In practice, this rule means that you should <em>not</em> call
 <code><a
                href="../classes/IloCP.html#method_solve">IloCP::solve</a></code> from inside the member function
 <code>IlcConstraintI::propagate</code>.</p></div><hr /><h3><a
            name="method_push">push</a></h3><div
                class="prototype">public void <span
                class="function-name">push</span>(<a
                href="../typedefs/IlcInt.html">IlcInt</a> <span
            class="parameter-name">priority</span>)</div><span
            class="deprecated-summary"><strong>Deprecated:</strong><em>
Since V12.6.0.
      </em></span><div
                        class="description"><p>This member function pushes the invoking constraint
    onto the constraint queue. After pushing a constraint,
    the <code><a
                href="../classes/IlcConstraintI.html#method_propagate">IlcConstraintI::propagate</a></code>
    method of the invoking constraint
    will be called during the current round of constraint
    propagation.  The argument <code>priority</code>, which can
    range from 1 to 5, indicates the priority of the constraint
    in the queue, with lower values indicating constraints which
    are propagated earlier.
 </p></div><hr /><h3><a
            name="method_push">push</a></h3><div
                class="prototype">public void <span
            class="function-name">push</span>()</div><div
                        class="description"><p>This member function pushes the invoking constraint
    onto the constraint queue. After pushing a constraint,
    the <code><a href="../classes/IlcConstraintI.html#method_propagate">IlcConstraintI::propagate</a></code>
    method of the invoking constraint
    will be called during the current round of constraint
    propagation.
 </p></div><hr /></body>
</html>
