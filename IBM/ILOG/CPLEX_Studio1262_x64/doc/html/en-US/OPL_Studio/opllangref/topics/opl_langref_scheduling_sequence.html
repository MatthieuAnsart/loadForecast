<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Sequencing of interval variables" />
<meta name="abstract" content="Describes a basic building block of scheduling, the interval sequence." />
<meta name="Description" content="Describes a basic building block of scheduling, the interval sequence." />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/opllangref/topics/opl_langref_scheduling.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="qqgH43RP" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/opllangref/topics/opl_langref_scheduling.html" />
<title>Sequencing of interval variables</title>
</head>
<body role="main" id="qqgH43RP">
<h1 class="title topictitle1">Sequencing of interval variables</h1>
<div class="body"><p class="shortdesc">Describes a basic building block of scheduling, the <em class="ph i">interval</em> <em class="ph i">sequence</em>.</p>
<p class="p">⊂π∀</p>
<p class="p">An <em class="ph i">interval</em> <em class="ph i">sequence</em> <em class="ph i">variable</em> is defined on a set of interval variables <em class="ph i">A</em>. Informally speaking, the value of an interval sequence variable represents a total ordering of the interval variables of <em class="ph i">A</em>. Note that any absent interval variables are not considered in the ordering.</p>
<p class="p">More formally, an interval sequence variable <em class="ph i">p</em> on a set interval variables <em class="ph i">A</em> represents a decision variable whose possible values are all the permutations of the intervals of <em class="ph i">A</em>. Let <img class="image" src="../images/k_A_underscore.jpg" alt="k_A_underscore" /> be a set of fixed intervals and <em class="ph i">n</em> denote the cardinality of <img class="image" src="../images/k_A_underscore.jpg" alt="k_A_underscore" />.</p>
<div class="image"><img class="image" src="../images/interval_sequence2.jpg" alt="interval_sequence2" /></div><p class="p">Note that the sequence alone does not enforce any constraint on the relative position of intervals end-points. For instance, an interval variable <em class="ph i">a</em> could be sequenced before an interval variable <em class="ph i">b</em> in a sequence <em class="ph i">p</em> without any impact on the relative position between the start/end points of <em class="ph i">a</em> and <em class="ph i">b</em> (<em class="ph i">a</em> could still be fixed to start after the end of <em class="ph i">b</em>). This is because different semantics can be used to define how a sequence constrains the positions of intervals. We will see later how the <em class="ph i">noOverlap</em> constraint implements one of these possible semantics.</p>
<p class="p">The sequence variable also allows associating a fixed non-negative integer <em class="ph i">type</em> with each interval variable in the sequence. In particular, these integers are used by the <em class="ph i">noOverlap</em> constraint. <em class="ph i">T</em>(<em class="ph i">p</em>, <em class="ph i">a</em>) denotes the fixed non-negative integer type of interval variable <em class="ph i">a</em> in the sequence variable <em class="ph i">p</em>.</p>
<div class="section" id="qqgH43RP__WAqgxAjM"><h2 class="title sectiontitle">Constraints on sequence variables</h2><p class="p">The following constraints are available on sequence variables:</p>
<ul class="ul"><li class="li"><p class="p"> <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_first.html" title="OPL function (scheduling) to sequence interval variables">first (scheduling)</a>(<em class="ph i">p</em>,<em class="ph i">a</em>) states that if interval <em class="ph i">a</em> is present, then it will be the first interval of the sequence <em class="ph i">p</em>.</p>
</li>
<li class="li"><p class="p"> <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_last.html" title="OPL function (scheduling) to sequence interval variables">last (scheduling)</a>(<em class="ph i">p</em>,<em class="ph i">a</em>) states that if interval <em class="ph i">a</em> is present, then it will be the last interval of the sequence <em class="ph i">p</em>.</p>
</li>
<li class="li"><p class="p"> <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_before.html" title="OPL function (scheduling) to sequence interval variables">before</a>(<em class="ph i">p</em>, <em class="ph i">a</em>, <em class="ph i">b</em>) states that if both intervals <em class="ph i">a</em> and <em class="ph i">b</em> are present then <em class="ph i">a</em> will appear before <em class="ph i">b</em> in the sequence <em class="ph i">p</em>.</p>
</li>
<li class="li"><p class="p"> <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_prev.html" title="OPL function (scheduling) to sequence interval variables">prev (scheduling)</a>(<em class="ph i">p</em>, <em class="ph i">a</em>, <em class="ph i">b</em>) states that if both intervals <em class="ph i">a</em> and <em class="ph i">b</em> are present then <em class="ph i">a</em> will be just before <em class="ph i">b</em> in the sequence <em class="ph i">p</em>, that is, it will appear before <em class="ph i">b</em> and no other interval will be sequenced between <em class="ph i">a</em> and <em class="ph i">b</em> in the sequence.</p>
 </li>
</ul>
<p class="p">The formal semantics of these basic constraints is shown in the following table.</p>
<div class="image"><img class="image" src="../images/interval_sequence1.jpg" alt="interval_sequence1" /></div></div>
<div class="section" id="qqgH43RP__ntueMAKb"><h2 class="title sectiontitle">The no overlap constraint</h2><p class="p">The <em class="ph i">no</em> <em class="ph i">overlap</em> constraint on an interval sequence variable <em class="ph i">p</em> states that the sequence defines a chain of non-overlapping intervals, any interval in the chain being constrained to end before the start of the next interval in the chain. This constraint is typically useful for modelling disjunctive resources.</p>
<p class="p">More formally, the condition for a permutation value <img class="image" src="../images/pi.jpg" alt="pi" /> for sequence <em class="ph i">p</em> to satisfy the <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_noOverlap.html" title="OPL constraint (scheduling) used to prevent intervals in a sequence from overlapping and (optionally) to enforce a minimal distance between consecutive intervals.">noOverlap</a> constraints is defined as:</p>
<div class="image"><img class="image" src="../images/nooverlap1.jpg" alt="noOverlap1" /></div><p class="p">If a transition distance matrix <em class="ph i">M</em> is specified, it defines the minimal non-negative distance that must separate two consecutive intervals in the sequence.</p>
<p class="p">More formally, if <em class="ph i">T</em>(<em class="ph i">p</em>,<em class="ph i">a</em>) denotes the non-negative integer type of interval <em class="ph i">a</em> in the sequence variable <em class="ph i">p</em>:</p>
<div class="image"><img class="image" src="../images/nooverlap2.jpg" alt="nooverlap2" /></div><p class="p">A sequence variable together with a no-overlap constraint using it are illustrated in this figure:</p>
<div class="image"><img class="image" src="../images/sequence.jpg" alt="sequence" /></div></div>
<div class="section" id="qqgH43RP__TheSameSequenceAndSameCommonSubsequ"><h2 class="title sectiontitle">The sameSequence and sameCommonSubsequence constraints</h2><p class="p">The <samp class="ph codeph">sameSequence</samp> and <samp class="ph codeph">sameCommonSubsequence</samp> constraints are binary constraints on a pair of sequence variables <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em>. These constraints state that the relative position of some related subsets of interval variables is the same in both sequences. Typically, if <em class="ph i">a</em> is before <em class="ph i">b</em> in sequence <em class="ph i">p<sub class="ph sub">1</sub></em> then the interval related to <em class="ph i">a</em> is before the interval related to <em class="ph i">b</em> in sequence <em class="ph i">p<sub class="ph sub">2</sub></em>. Here are two examples of use-cases for these constraints.</p>
<ul class="ul"><li class="li">First in/first out and no-bypass constraints. In some physical systems, like trains on a single line railway, or items on a conveyor belt, bypassing is not possible and items must enter and exit a given section of the system in the same order. If entering and exiting the sections or the junctions of the system is modeled by two related interval variables, those constraints can be modeled by <samp class="ph codeph">sameSequence</samp> constraints (or <samp class="ph codeph">sameCommonSubsequence</samp> constraints if the items do not follow the same path) on the sequences of entering and exiting intervals. A classic example of such a constraint is the permutation flow-shop scheduling problem.</li>
<li class="li">Scenario-based approaches for scheduling with uncertainties. In presence of uncertainties (for instance, uncertain activity durations) one may be interested in building sequences of activities on unary resources that optimize some robustness or statistical criterion (for instance the expected makespan). A scenario is a sub-model that defines a particular realization of the uncertainties in the environment. As one must find robust sequences that optimize some criterion over all scenarios, the different sequences of a given unary resource across all scenarios are linked with <samp class="ph codeph">sameSequence</samp> constraints.</li>
</ul>
<p class="p">A constraint <em class="ph i">sameCommonSubsequence(p<sub class="ph sub">1</sub>, p<sub class="ph sub">2</sub>, B<sub class="ph sub">1</sub>, B<sub class="ph sub">2</sub>)</em> is defined on two sequence variables <em class="ph i">p<sub class="ph sub">1</sub></em> (defined on a set of interval variables <em class="ph i">A<sub class="ph sub">1</sub></em>) and <em class="ph i">p<sub class="ph sub">2</sub></em> (defined on a set of interval variables <em class="ph i">A<sub class="ph sub">2</sub></em>), with two arrays of interval variables <em class="ph i">B<sub class="ph sub">1</sub></em> and <em class="ph i">B<sub class="ph sub">2</sub></em> of identical size and such that <em class="ph i">B<sub class="ph sub">1</sub> ⊂ A<sub class="ph sub">1</sub>, B<sub class="ph sub">2</sub> ⊂ A<sub class="ph sub">2</sub></em>. The constraint states that the sub-sequences defined by <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em> by only considering the pairs of present intervals (<em class="ph i">B<sub class="ph sub">1</sub>[i], B<sub class="ph sub">2</sub>[i])</em> are identical modulo the mapping between intervals <em class="ph i">B<sub class="ph sub">1</sub>[i]</em> and <em class="ph i">B<sub class="ph sub">2</sub>[i]</em>.</p>
<p class="p">For instance, let's suppose sequence variable <em class="ph i">p<sub class="ph sub">1</sub></em> defined on interval variables <em class="ph i">{a,b,c,d,e,f}</em> and sequence variable<em class="ph i"> p<sub class="ph sub">2</sub></em> defined on interval variables <em class="ph i">{u,v,w,x,y,z}</em> with a constraint <em class="ph i">sameCommonSubsequence(p<sub class="ph sub">1</sub>, p<sub class="ph sub">2</sub>, [a,c,d,e,f], [u,w,v,x,y])</em>. Assuming that, in a solution, interval variables <em class="ph i">d</em> and <em class="ph i">y</em> are absent while all the other interval variables are present. The pair of permutations <em class="ph i">π<sub class="ph sub">1</sub>=(c,f,a,e,b)</em> and <em class="ph i">π<sub class="ph sub">2</sub>=(w,v,u,x)</em> satisfies the <em class="ph i">sameCommonSubsequence</em> constraints. Indeed if one considers only pairs of present intervals, the mapping <em class="ph i">B<sub class="ph sub">1</sub></em>, <em class="ph i">B<sub class="ph sub">2</sub></em> maps <em class="ph i">[a,c,e]</em> with <em class="ph i">[u,w,x]</em>. Sub-sequence of <em class="ph i">π<sub class="ph sub">1</sub></em> over <em class="ph i">{a,c,e}</em> is <em class="ph i">(c,a,e)</em>, sub-sequence of <em class="ph i">π<sub class="ph sub">2</sub></em> over <em class="ph i">{u,w,x}</em> is <em class="ph i">(w,u,x)</em> and one can see that the two sub-sequences are the same modulo the mapping.</p>
<p class="p">More formally, let <em class="ph i">n</em> denote the size of both interval variable arrays <em class="ph i">B<sub class="ph sub">1</sub></em> and <em class="ph i">B<sub class="ph sub">2</sub></em>. The condition for permutations <em class="ph i">π<sub class="ph sub">1</sub></em> and <em class="ph i">π<sub class="ph sub">2</sub></em> of sequencing variables <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em> to satisfy the constraint <em class="ph i">sameCommonSubsequence(π<sub class="ph sub">1</sub>, π<sub class="ph sub">2</sub>, <u class="ph u">B<sub class="ph sub">1</sub></u>, <u class="ph u">B<sub class="ph sub">2</sub></u>)</em> is defined as:</p>
<p class="p"><em class="ph i">∀i, j ∈ [1, n], i ≠ j, x(<u class="ph u">B<sub class="ph sub">1</sub></u>[i]), x(<u class="ph u">B<sub class="ph sub">1</sub></u>[j]), x(<u class="ph u">B<sub class="ph sub">2</sub></u>[i]), x(<u class="ph u">B<sub class="ph sub">2</sub></u>[j]), (π<sub class="ph sub">1</sub>(<u class="ph u">B<sub class="ph sub">1</sub></u>[i]) &lt; π<sub class="ph sub">1</sub>(<u class="ph u">B<sub class="ph sub">1</sub></u>[j]) ⇔ π<sub class="ph sub">2</sub>(<u class="ph u">B<sub class="ph sub">2</sub></u>[i]) &lt; π<sub class="ph sub">2</sub>(<u class="ph u">B<sub class="ph sub">2</sub></u>[j])</em></p>
<p class="p">A constraint <em class="ph i">sameSequence(p<sub class="ph sub">1</sub>, p<sub class="ph sub">2</sub>, B<sub class="ph sub">1</sub>, B<sub class="ph sub">2</sub>)</em> is defined on two sequence variables of identical size <em class="ph i">p<sub class="ph sub">1</sub></em> (defined on a set of interval variables<em class="ph i"> A<sub class="ph sub">1</sub></em>) and <em class="ph i">p<sub class="ph sub">2</sub></em> (defined on a set of interval variables <em class="ph i">A<sub class="ph sub">2</sub></em>) with two arrays of interval variables <em class="ph i">B<sub class="ph sub">1</sub></em> and <em class="ph i">B<sub class="ph sub">2</sub></em> that are an ordering of sets <em class="ph i">A<sub class="ph sub">1</sub></em> and <em class="ph i">A<sub class="ph sub">2</sub></em>. The constraint states that sequences <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em> are identical modulo a mapping between intervals <em class="ph i">B<sub class="ph sub">1</sub>[i]</em> and <em class="ph i">B<sub class="ph sub">2</sub>[i]</em>. A <samp class="ph codeph">sameSequence</samp> constraint is stronger than a <samp class="ph codeph">sameCommonSubsequence</samp> constraint; it additionally imposes that arrays <em class="ph i">B<sub class="ph sub">1</sub></em> and <em class="ph i">B<sub class="ph sub">2</sub></em> contain all the definition intervals of their relative sequence variables and that the presence status of mapped interval variables <em class="ph i">B<sub class="ph sub">1</sub>[i]</em> and <em class="ph i">B<sub class="ph sub">2</sub>[i]</em> is the same.</p>
<p class="p">More formally, let <em class="ph i">n</em> denote the size of both sequence variables. The condition for permutations <em class="ph i">π<sub class="ph sub">1</sub></em>and <em class="ph i">π<sub class="ph sub">2</sub></em> of the sequence variables <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em> to satisfy constraint <em class="ph i">sameSequence(π<sub class="ph sub">1</sub>, π<sub class="ph sub">2</sub>, <u class="ph u">B<sub class="ph sub">1</sub></u>, <u class="ph u">B<sub class="ph sub">2</sub></u>)</em> is defined as:</p>
<p class="p"><em class="ph i">∀i ∈ [1, n], π<sub class="ph sub">1</sub>(<u class="ph u">B<sub class="ph sub">1</sub></u>[i]) = π<sub class="ph sub">2</sub>(<u class="ph u">B<sub class="ph sub">2</sub></u>[i])</em></p>
<p class="p">When parameters <em class="ph i">B<sub class="ph sub">1</sub></em> and<em class="ph i"> B<sub class="ph sub">2</sub></em> are omitted in the definition of the above constraints, we assume <em class="ph i">B<sub class="ph sub">1</sub></em> and<em class="ph i"> B<sub class="ph sub">2</sub></em> are the definition intervals of <em class="ph i">p<sub class="ph sub">1</sub></em> and <em class="ph i">p<sub class="ph sub">2</sub></em>, following the definition order of interval variables in the sequence.</p>
</div>
<div class="section" id="qqgH43RP__NLWvgkFl"><h2 class="title sectiontitle">Syntax and examples</h2><p class="p">For syntax and examples of use of the sequence interval variable, see <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_sequence.html" title="OPL keyword (CP, scheduling) to define a sequence of interval variables.">sequence</a> in the <em class="ph i">OPL Language Quick Reference</em>.</p>
<p class="p">For the syntax and examples of use of the no overlap constraint, which needs to be defined as a set of integer triples, see <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_noOverlap.html" title="OPL constraint (scheduling) used to prevent intervals in a sequence from overlapping and (optionally) to enforce a minimal distance between consecutive intervals.">noOverlap</a>  in the <em class="ph i">OPL Language Quick Reference</em>.</p>
<p class="p">For the syntax and examples of the other constraints available on an interval sequence variable, see <a class="xref" href="../../opllang_quickref/topics/tlr_oplf_first.html" title="OPL function to return the first element in a set.">first</a>, <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_last.html" title="OPL function (scheduling) to sequence interval variables">last (scheduling)</a>, <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_prev.html" title="OPL function (scheduling) to sequence interval variables">prev (scheduling)</a>, <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_before.html" title="OPL function (scheduling) to sequence interval variables">before</a>, <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_sameSequence.html#sameSequence" title="A binary constraint on a pair of sequence variables. The constraint states that the relative position of related interval variables is the same in both sequences, seq1 and seq2.">sameSequence</a>, and <a class="xref" href="../../opllang_quickref/topics/tlr_oplsch_sameCommonSubsequence.html#sameCommonSubsequence" title="A binary constraint on a pair of sequence variables. The constraint states that the relative position of some related subsets of interval variables is the same in both sequences, seq1 and seq2.">sameCommonSubsequence</a> in the <em class="ph i">OPL Language Quick Reference</em>. (Note that there are similarly-named constraints available for set operations in OPL.)</p>
<p class="p">Note that none of the constraints mentioned in this section can be used in a meta-constraint.</p>
<p class="p">Sequence variables can be viewed in a Gantt chart in the CPLEX® Studio IDE. A simple example is given in <a class="xref" href="../../gsoplide/topics/opl_ide_gs_tut_view_results.html" title="The results of solving a scheduling model can be displayed in a Gantt chart.">Viewing the results of scheduling problems</a>.</p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/opllangref/topics/opl_langref_scheduling.html" title="Describes how to model scheduling problems in OPL.">Scheduling</a></div>
</div>
</div></body>
</html>