<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Integer programming: a warehouse location problem" />
<meta name="abstract" content="Describes the problem and presents the model and data files." />
<meta name="Description" content="Describes the problem and presents the model and data files." />
<meta name="DC.subject" content="warehouse location problem, models, warehouse location, integer programming, code samples, warehouse.mod, constraints, in warehouse location problem" />
<meta name="keywords" content="warehouse location problem, models, warehouse location, integer programming, code samples, warehouse.mod, constraints, in warehouse location problem" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_exs.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="usropllangtut.uss_langtut_examples.1041483" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_exs.html" />
<title>Integer programming: a warehouse location problem</title>
</head>
<body role="main" id="usropllangtut.uss_langtut_examples.1041483">
<h1 class="title topictitle1">Integer programming: a warehouse location problem</h1>
<div class="body"><p class="shortdesc">Describes the problem and presents the model and data files.</p>
<p class="p">Warehouse location is a typical discrete optimization problem.
A company is considering a number of locations for building warehouses
to supply a set of stores. Each possible warehouse has a fixed operating
cost and a maximum capacity specifying how many stores it can support.
In addition, each store must be supplied by exactly one warehouse
and the cost to supply a store depends on the warehouse selected.
The model consists of choosing which warehouses to build and which
warehouse to assign to each store in order to minimize the total cost,
i.e., the sum of the fixed and supply costs. Consider an example with
five warehouses and ten stores. The fixed costs for the warehouses
are all identical and equal to 30. The instance data for the problem,
shown in the table below, reflects the transportation costs and the
capacity constraints defined in the data file <samp class="ph codeph">warehouse.dat</samp>. </p>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="A six column table that lists the capacity of warehouses in different locations and the cost to supply a given store from a given warehouse." id="usropllangtut.uss_langtut_examples.1041483__usropllangtut.uss_langtut_examples.1025757" class="table ShadedHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 1. Instance data for the warehouse
location problem</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e48"><em class="ph i">Warehouses</em></th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e51">Bonn</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e53">Bordeaux</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e55">London</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e57">Paris</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d756820e59">Rome</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 "><em class="ph i">Capacity</em></td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">4</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">2</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">3</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">20</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">24</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">11</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">25</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">30</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store2</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">28</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">27</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">82</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">83</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">74</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store3</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">74</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">97</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">71</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">96</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">70</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store4</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">2</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">55</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">73</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">69</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">61</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store5</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">46</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">96</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">59</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">83</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">4</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store6</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">42</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">22</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">29</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">67</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">59</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store7</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">5</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">73</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">59</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">56</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store8</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">10</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">73</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">13</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">43</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">96</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store9</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">93</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">35</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">63</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">85</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">46</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d756820e48 ">store10</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e51 ">47</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e53 ">65</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e55 ">55</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e57 ">71</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d756820e59 ">95</td>
</tr>
</tbody>
</table>
</div>
<p class="p">To represent our warehouse location problem as an integer program,
the model, <span class="ph filepath">warehouse.mod</span>, uses a <samp class="ph codeph">0-1</samp> Boolean
variable for each combination of warehouse and store to represent
whether or not a warehouse supplies a store. In addition, the model
associates a variable with each warehouse to indicate whether the
warehouse is selected. Once these variables are declared, the constraints
state that each store must be supplied by a warehouse, that each store
can be supplied by only an open warehouse, and that each warehouse
cannot deliver more stores than its allowed capacity.</p>
<div class="example" id="usropllangtut.uss_langtut_examples.1041483__usropllangtut.uss_langtut_examples.1040731"><h2 class="title sectiontitle">Warehouse
location, as a discrete optimization problem (<samp class="ph codeph">warehouse.mod</samp>)</h2><pre class="pre codeblock"><code>int Fixed = ...;
{string} Warehouses = ...;
int NbStores = ...;
range Stores = 0..NbStores-1;
int Capacity[Warehouses] = ...;
int SupplyCost[Stores][Warehouses] = ...;
dvar boolean Open[Warehouses];
dvar boolean Supply[Stores][Warehouses];


minimize
  sum( w in Warehouses ) 
    Fixed * Open[w] +
  sum( w in Warehouses , s in Stores ) 
    SupplyCost[s][w] * Supply[s][w];
    

subject to{
  forall( s in Stores )
    ctEachStoreHasOneWarehouse:
      sum( w in  Warehouses ) 
        Supply[s][w] == 1;
  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];
}

{int} Storesof[w in Warehouses] = { s | s in Stores : Supply[s][w] == 1 };
execute DISPLAY_RESULTS{
  writeln("Open=",Open);
  writeln("Storesof=",Storesof);
}</code></pre>
</div>
<p class="p">The most delicate aspect of the modeling is expressing that a warehouse
can supply a store only when it is open. These constraints can be
expressed by inequalities of the form </p>
<pre class="pre codeblock"><code>supply[w][s] &lt;= open[w]; </code></pre>
<p class="p">which ensure that when warehouse <samp class="ph codeph">w</samp> is not open,
it cannot supply store <samp class="ph codeph">s</samp>. This follows from the fact
that <samp class="ph codeph">open[w] == 0</samp> implies <samp class="ph codeph">supply[w][s] ==
0</samp>. In fact, these constraints can be combined with the capacity
constraints to obtain </p>
<pre class="pre codeblock"><code>  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];</code></pre>
<p class="p">This formulation implies that a closed warehouse has no capacity. </p>
<p class="p">The statement declares the warehouses and the stores, the fixed
cost of the warehouses, and the supply cost of a store for each warehouse.
The problem variables </p>
<pre class="pre codeblock"><code>dvar boolean Supply[Stores][Warehouses];</code></pre>
<p class="p">represent which warehouses supply the stores, i.e., <samp class="ph codeph">supply[s][w]</samp> is
1 if warehouse <samp class="ph codeph">w</samp> supplies store <samp class="ph codeph">s,</samp> and
zero otherwise. </p>
<p class="p">The objective function </p>
<pre class="pre codeblock"><code>minimize
  sum( w in Warehouses ) 
    Fixed * Open[w] +
  sum( w in Warehouses , s in Stores ) 
    SupplyCost[s][w] * Supply[s][w];
    
</code></pre>
<p class="p">expresses the goal that the model minimizes the fixed cost of the
selected warehouse and the supply costs of stores.</p>
<p class="p">The constraint </p>
<pre class="pre codeblock"><code>  forall( s in Stores )
    ctEachStoreHasOneWarehouse:
      sum( w in  Warehouses ) 
        Supply[s][w] == 1;</code></pre>
<p class="p">states that a store must be supplied by exactly one warehouse. </p>
<p class="p">The constraints </p>
<pre class="pre codeblock"><code>  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];</code></pre>
<p class="p">express the capacity constraints for the warehouses and make sure
that a warehouse supplies a store only if the warehouse is open. </p>
<div class="section" id="usropllangtut.uss_langtut_examples.1041483__usropllangtut.uss_langtut_examples.1041726"><h2 class="title sectiontitle">A
solution to warehouse.mod</h2><p class="p">For
the instance data depicted in the table <a class="xref" href="opl_languser_app_areas_exsIP.html#usropllangtut.uss_langtut_examples.1041483__usropllangtut.uss_langtut_examples.1025757" title="A six column table that lists the capacity of warehouses in different locations and the cost to supply a given store from a given warehouse.">Table 1</a>,
OPL returns the following optimal solution:</p>
<pre class="pre codeblock"><code>Final Solution with objective 383.0000:
  open = [1 1 1 0 1];
  supply = [[0 0 0 0 1]
            [0 1 0 0 0]
            [0 0 0 0 1]
            [1 0 0 0 0]
            [0 0 0 0 1]
            [0 1 0 0 0]
            [0 1 0 0 0]
            [0 0 1 0 0]
            [0 1 0 0 0]
            [0 0 1 0 0]];</code></pre>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_exs.html" title="Demonstrates how OPL is used in linear programming (product mix problem) and integer programming (warehouse location problem).">Some examples</a></div>
</div>
</div></body>
</html>