<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Warehouse location" />
<meta name="abstract" content="Describes the problem and presents the model and data files." />
<meta name="Description" content="Describes the problem and presents the model and data files." />
<meta name="DC.subject" content="integer programming, warehouse location, models, warehouse location problem, code samples, warehouse.dat, warehouse.mod" />
<meta name="keywords" content="integer programming, warehouse location, models, warehouse location problem, code samples, warehouse.dat, warehouse.mod" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_IP.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="usropllangtut.uss_langtut_linearInteger.1056682" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_IP.html" />
<title>Warehouse location</title>
</head>
<body role="main" id="usropllangtut.uss_langtut_linearInteger.1056682">
<h1 class="title topictitle1">Warehouse location</h1>
<div class="body"><p class="shortdesc">Describes the problem and presents the model and data files.</p>
<p class="p">Warehouse location is another typical integer-programming problem.
Suppose a company that is considering a number of locations for building
warehouses to supply its existing stores. Each possible warehouse
has a fixed maintenance cost and a maximum capacity specifying how
many stores it can support. In addition, each store can be supplied
by only one warehouse and the supply cost to the store differs according
to the warehouse selected. The application consists of choosing which
warehouses to build and which of them should supply the various stores
in order to minimize the total cost, i.e., the sum of the fixed and
supply costs. The instance used in this section considers five warehouses
and 10 stores. The fixed costs for the warehouses are all identical
and equal to 30. <a class="xref" href="opl_languser_app_areas_IP_warehse.html#usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1047426" title="A six column table that lists the capacity of warehouses in different locations and the supply cost to different stores of being served by a given warehouse.">Table 1</a> depicts
the transportation costs and the capacity constraints. </p>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="A six column table that lists the capacity of warehouses in different locations and the supply cost to different stores of being served by a given warehouse." id="usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1047426" class="table ShadedHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 1. Instance data for the warehouse-location
problem</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" id="d751781e51"> </th>
<th class="entry" align="left" valign="top" id="d751781e52">Bonn</th>
<th class="entry" align="left" valign="top" id="d751781e54">Bordeaux</th>
<th class="entry" align="left" valign="top" id="d751781e56">London</th>
<th class="entry" align="left" valign="top" id="d751781e58">Paris</th>
<th class="entry" align="left" valign="top" id="d751781e60">Rome</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">capacity</td>
<td class="entry" valign="top" headers="d751781e52 ">1</td>
<td class="entry" valign="top" headers="d751781e54 ">4</td>
<td class="entry" valign="top" headers="d751781e56 ">2</td>
<td class="entry" valign="top" headers="d751781e58 ">1</td>
<td class="entry" valign="top" headers="d751781e60 ">3</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store1</td>
<td class="entry" valign="top" headers="d751781e52 ">20</td>
<td class="entry" valign="top" headers="d751781e54 ">24</td>
<td class="entry" valign="top" headers="d751781e56 ">11</td>
<td class="entry" valign="top" headers="d751781e58 ">25</td>
<td class="entry" valign="top" headers="d751781e60 ">30</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store2</td>
<td class="entry" valign="top" headers="d751781e52 ">28</td>
<td class="entry" valign="top" headers="d751781e54 ">27</td>
<td class="entry" valign="top" headers="d751781e56 ">82</td>
<td class="entry" valign="top" headers="d751781e58 ">83</td>
<td class="entry" valign="top" headers="d751781e60 ">74</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store3</td>
<td class="entry" valign="top" headers="d751781e52 ">74</td>
<td class="entry" valign="top" headers="d751781e54 ">97</td>
<td class="entry" valign="top" headers="d751781e56 ">71</td>
<td class="entry" valign="top" headers="d751781e58 ">96</td>
<td class="entry" valign="top" headers="d751781e60 ">70</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store4</td>
<td class="entry" valign="top" headers="d751781e52 ">2</td>
<td class="entry" valign="top" headers="d751781e54 ">55</td>
<td class="entry" valign="top" headers="d751781e56 ">73</td>
<td class="entry" valign="top" headers="d751781e58 ">69</td>
<td class="entry" valign="top" headers="d751781e60 ">61</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store5</td>
<td class="entry" valign="top" headers="d751781e52 ">46</td>
<td class="entry" valign="top" headers="d751781e54 ">96</td>
<td class="entry" valign="top" headers="d751781e56 ">59</td>
<td class="entry" valign="top" headers="d751781e58 ">83</td>
<td class="entry" valign="top" headers="d751781e60 ">4</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store6</td>
<td class="entry" valign="top" headers="d751781e52 ">42</td>
<td class="entry" valign="top" headers="d751781e54 ">22</td>
<td class="entry" valign="top" headers="d751781e56 ">29</td>
<td class="entry" valign="top" headers="d751781e58 ">67</td>
<td class="entry" valign="top" headers="d751781e60 ">59</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store7</td>
<td class="entry" valign="top" headers="d751781e52 ">1</td>
<td class="entry" valign="top" headers="d751781e54 ">5</td>
<td class="entry" valign="top" headers="d751781e56 ">73</td>
<td class="entry" valign="top" headers="d751781e58 ">59</td>
<td class="entry" valign="top" headers="d751781e60 ">56</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store8</td>
<td class="entry" valign="top" headers="d751781e52 ">10</td>
<td class="entry" valign="top" headers="d751781e54 ">73</td>
<td class="entry" valign="top" headers="d751781e56 ">13</td>
<td class="entry" valign="top" headers="d751781e58 ">43</td>
<td class="entry" valign="top" headers="d751781e60 ">96</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store9</td>
<td class="entry" valign="top" headers="d751781e52 ">93</td>
<td class="entry" valign="top" headers="d751781e54 ">35</td>
<td class="entry" valign="top" headers="d751781e56 ">63</td>
<td class="entry" valign="top" headers="d751781e58 ">85</td>
<td class="entry" valign="top" headers="d751781e60 ">46</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d751781e51 ">store10</td>
<td class="entry" valign="top" headers="d751781e52 ">47</td>
<td class="entry" valign="top" headers="d751781e54 ">65</td>
<td class="entry" valign="top" headers="d751781e56 ">55</td>
<td class="entry" valign="top" headers="d751781e58 ">71</td>
<td class="entry" valign="top" headers="d751781e60 ">95</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The key idea in representing a warehouse-location problem as an
integer program consists of using a 0-1 variable for each (warehouse,
store) pair to represent whether a warehouse supplies a store. In
addition, the model also associates a variable with each warehouse
to indicate whether the warehouse is selected. Once these variables
are declared, the constraints state that each store must be supplied
by a warehouse, that each store can be supplied by only an open warehouse,
and that each warehouse cannot deliver more stores than its allowed
capacity. The most delicate aspect of the modeling is expressing that
a warehouse can supply a store only when it is open. These constraints
can be expressed by inequalities of the form </p>
<pre class="pre codeblock"><code>  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];</code></pre>
<p class="p">which ensures that when warehouse <samp class="ph codeph">w</samp> is not open,
it does not supply store <samp class="ph codeph">s</samp>. This follows from the
fact that <samp class="ph codeph">open[w] == 0</samp> implies <samp class="ph codeph">supply[w][s]
== 0</samp>. </p>
<p class="p">As an alternative, you can write:</p>
<pre class="pre codeblock"><code>  forall(c in Connections)
    ctCapacity:             
      sum( &lt;p,c&gt; in Routes ) 
        Trans[&lt;p,c&gt;] &lt;= Capacity;</code></pre>
<p class="p">This formulation implies that a closed warehouse has no capacity. </p>
<p class="p"> <a class="xref" href="opl_languser_app_areas_IP_warehse.html#usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1022594">A warehouse-location model (warehouse.mod)</a> describes
an integer program for the warehouse-location problem, and <a class="xref" href="opl_languser_app_areas_IP_warehse.html#usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1022613">Data for the warehouse-location model (warehouse.dat)</a> depicts
some instance data. </p>
<div class="example" id="usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1022594"><h2 class="title sectiontitle">A
warehouse-location model (<samp class="ph codeph">warehouse.mod</samp>)</h2><pre class="pre codeblock"><code>int Fixed = ...;
{string} Warehouses = ...;
int NbStores = ...;
range Stores = 0..NbStores-1;
int Capacity[Warehouses] = ...;
int SupplyCost[Stores][Warehouses] = ...;
dvar boolean Open[Warehouses];
dvar boolean Supply[Stores][Warehouses];


minimize
  sum( w in Warehouses ) 
    Fixed * Open[w] +
  sum( w in Warehouses , s in Stores ) 
    SupplyCost[s][w] * Supply[s][w];
    

subject to{
  forall( s in Stores )
    ctEachStoreHasOneWarehouse:
      sum( w in  Warehouses ) 
        Supply[s][w] == 1;
  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];
}

{int} Storesof[w in Warehouses] = { s | s in Stores : Supply[s][w] == 1 };
execute DISPLAY_RESULTS{
  writeln("Open=",Open);
  writeln("Storesof=",Storesof);
}</code></pre>
</div>
<div class="example" id="usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1022613"><h2 class="title sectiontitle">Data
for the warehouse-location model (<samp class="ph codeph">warehouse.dat</samp>)</h2><pre class="pre codeblock"><code>Fixed = 30;
Warehouses = {Bonn,Bordeaux,London,Paris,Rome};
NbStores = 10;
Capacity = [1,4,2,1,3];
SupplyCost = [ 
       [ 20, 24, 11, 25, 30 ], 
       [ 28, 27, 82, 83, 74 ],
       [ 74, 97, 71, 96, 70 ],
       [  2, 55, 73, 69, 61 ],
       [ 46, 96, 59, 83,  4 ],
       [ 42, 22, 29, 67, 59 ],
       [  1,  5, 73, 59, 56 ],
       [ 10, 73, 13, 43, 96 ],
       [ 93, 35, 63, 85, 46 ],
       [ 47, 65, 55, 71, 95 ] ];</code></pre>
</div>
<p class="p">The statement declares the warehouses and the stores, the fixed
cost of the warehouses, and the supply cost of a store for each warehouse.
The problem variables </p>
<pre class="pre codeblock"><code>dvar boolean Open[Warehouses];
dvar boolean Supply[Stores][Warehouses];</code></pre>
<p class="p">represent which warehouses supply the stores, i.e., <samp class="ph codeph">supply[s][w]</samp> is <samp class="ph codeph">1</samp> if
warehouse <samp class="ph codeph">w</samp> supplies store <samp class="ph codeph">s</samp> and
zero otherwise. </p>
<p class="p">The objective function </p>
<pre class="pre codeblock"><code>minimize
  sum( w in Warehouses ) 
    Fixed * Open[w] +
  sum( w in Warehouses , s in Stores ) 
    SupplyCost[s][w] * Supply[s][w];
    
</code></pre>
<p class="p">expresses the goal that the model minimizes the fixed cost of the
selected warehouses and the supply costs of the stores. </p>
<p class="p">The constraint</p>
<pre class="pre codeblock"><code>  forall( s in Stores )
    ctEachStoreHasOneWarehouse:
      sum( w in  Warehouses ) 
        Supply[s][w] == 1;</code></pre>
<p class="p">states that a store must be supplied by exactly one warehouse. </p>
<p class="p">The constraint </p>
<pre class="pre codeblock"><code>  forall( w in Warehouses, s in Stores )
    ctUseOpenWarehouses:
      Supply[s][w] &lt;= Open[w];
  forall( w in Warehouses )
    ctMaxUseOfWarehouse:         
      sum( s in Stores ) 
        Supply[s][w] &lt;= Capacity[w];</code></pre>
<p class="p">expresses the capacity constraints for the warehouses and makes
sure that a warehouse supplies a store only if the warehouse is open. </p>
<div class="section" id="usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1049442"><h2 class="title sectiontitle">A
solution to warehouse.mod</h2><p class="p">For
the instance data shown in <a class="xref" href="opl_languser_app_areas_IP_warehse.html#usropllangtut.uss_langtut_linearInteger.1056682__usropllangtut.uss_langtut_linearInteger.1022613">Data for the warehouse-location model (warehouse.dat)</a>,
OPL returns the optimal solution </p>
<pre class="pre codeblock"><code>Optimal solution found with objective: 383
open= [1 1 1 0 1]
storesof= [{3} {1 5 6 8} {7 9} {} {0 2 4}]</code></pre>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_IP.html" title="Defines integer programming and describes a set covering problem, a warehouse location problem, a fixed-charge problem, and integer relaxation.">Integer programming</a></div>
</div>
</div></body>
</html>