<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="A blending problem" />
<meta name="abstract" content="Presents the problem of calculating different blends of gasoline according to specific quality criteria." />
<meta name="Description" content="Presents the problem of calculating different blends of gasoline according to specific quality criteria." />
<meta name="DC.subject" content="linear programming, blending problem, models, blending, code samples, oil.dat, oil.mod" />
<meta name="keywords" content="linear programming, blending problem, models, blending, code samples, oil.dat, oil.mod" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_LP.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="usropllangtut.uss_langtut_linearInteger.1018159" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_LP.html" />
<title>A blending problem</title>
</head>
<body role="main" id="usropllangtut.uss_langtut_linearInteger.1018159">
<h1 class="title topictitle1">A blending problem</h1>
<div class="body"><p class="shortdesc">Presents the problem of calculating different blends of
gasoline according to specific quality criteria.</p>
<p class="p">Blending problems are another typical application of linear programming.
Consider the following problem. An oil company manufactures three
types of gasoline: <samp class="ph codeph">super</samp>, <samp class="ph codeph">regular</samp>,
and <samp class="ph codeph">diesel</samp>. Each type of gasoline is produced by
blending three types of crude oil: <samp class="ph codeph">crude1</samp>, <samp class="ph codeph">crude2</samp>,
and <samp class="ph codeph">crude3</samp>. Table 1 below depicts the sales price
and the purchase price per barrel of the various products. The gasoline
must satisfy some quality criteria with respect to their lead content
and their octane ratings, thus constraining the possible blendings.</p>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="A four column table that lists the sale price of different fuels and the purchase price of different crude oils." id="usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1069829" class="table ShadedHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 1. Prices for the blending
problem</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" width="25%" id="d753508e62"> </th>
<th class="entry" align="left" valign="top" width="25%" id="d753508e63">Sales Price</th>
<th class="entry" align="left" valign="top" width="25%" id="d753508e65"> </th>
<th class="entry" align="left" valign="top" width="25%" id="d753508e66">Purchase Price</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" width="25%" headers="d753508e62 ">super</td>
<td class="entry" valign="top" width="25%" headers="d753508e63 ">$70</td>
<td class="entry" valign="top" width="25%" headers="d753508e65 ">crude1</td>
<td class="entry" valign="top" width="25%" headers="d753508e66 ">$45</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="25%" headers="d753508e62 ">regular</td>
<td class="entry" valign="top" width="25%" headers="d753508e63 ">$60</td>
<td class="entry" valign="top" width="25%" headers="d753508e65 ">crude2</td>
<td class="entry" valign="top" width="25%" headers="d753508e66 ">$35</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="25%" headers="d753508e62 ">diesel</td>
<td class="entry" valign="top" width="25%" headers="d753508e63 ">$50</td>
<td class="entry" valign="top" width="25%" headers="d753508e65 ">crude3</td>
<td class="entry" valign="top" width="25%" headers="d753508e66 ">$25</td>
</tr>
</tbody>
</table>
</div>
<p class="p">Table 2 describes the relevant instance data.</p>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="A six column table that lists octane rating and lead content for different fuels and different crude oils." id="usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1069924" class="table ShadedHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 2. Octane and lead data for
the blending problem</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e113"> </th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e114">Octane Rating</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e116">Lead Content</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e118"> </th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e119">Octane Rating</th>
<th class="entry" align="left" valign="top" width="16.666666666666664%" id="d753508e121">Lead Contents</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d753508e113 ">super</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e114 ">greater than or equal to 10</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e116 ">less than or equal to 1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e118 ">crude1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e119 ">12</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e121 ">0.5</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d753508e113 ">regular</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e114 ">greater than or equal to 8</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e116 ">less than or equal to 2</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e118 ">crude2</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e119 ">6</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e121 ">2.0</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="16.666666666666664%" headers="d753508e113 ">diesel</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e114 ">greater than or equal to 6</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e116 ">less than or equal to 1</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e118 ">crude3</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e119 ">8</td>
<td class="entry" valign="top" width="16.666666666666664%" headers="d753508e121 ">3.0</td>
</tr>
</tbody>
</table>
</div>
<p class="p">The company must also satisfy its customer demand, which is 3,000
barrels a day of <samp class="ph codeph">super</samp>, 2,000 of <samp class="ph codeph">regular</samp>,
and 1,000 of <samp class="ph codeph">diesel</samp>. The company can purchase 5,000
barrels of each type of crude oil per day and can process at most
14,000 barrels a day. In addition, the company has the option of advertising
a gasoline, in which case the demand for this type of gasoline increases
by ten barrels for every dollar spent. Finally, it costs four dollars
to transform a barrel of oil into a barrel of gasoline. The model
is depicted in the example <samp class="ph codeph">oil.mod</samp> and the instance
data is shown in <samp class="ph codeph">oil.dat</samp>.</p>
<div class="example" id="usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1047012"><h2 class="title sectiontitle">An
oil-blending planning problem <samp class="ph codeph">(oil.mod</samp>)</h2><pre class="pre codeblock"><code>{string} Gasolines = ...;
{string} Oils = ...;
tuple gasType {
  float demand;
  float price;
  float octane;
  float lead;
}

tuple oilType {
  float capacity;
  float price;
  float octane;
  float lead;
}
gasType Gas[Gasolines] = ...;
oilType Oil[Oils] = ...;
float MaxProduction = ...;
float ProdCost = ...;

dvar float+ a[Gasolines];
dvar float+ Blend[Oils][Gasolines];


maximize
  sum( g in Gasolines , o in Oils )
    (Gas[g].price - Oil[o].price - ProdCost) * Blend[o][g] 
    - sum(g in Gasolines) a[g];
subject to {
  forall( g in Gasolines )
    ctDemand: 
      sum( o in Oils ) 
        Blend[o][g] == Gas[g].demand + 10*a[g];
  forall( o in Oils )
    ctCapacity:   
      sum( g in Gasolines ) 
        Blend[o][g] &lt;= Oil[o].capacity;
  ctMaxProd:  
    sum( o in Oils , g in Gasolines ) 
      Blend[o][g] &lt;= MaxProduction;
  forall( g in Gasolines )
    ctOctane: 
      sum( o in Oils ) 
        (Oil[o].octane - Gas[g].octane) * Blend[o][g] &gt;= 0;
  forall( g in Gasolines )
    ctLead:
      sum( o in Oils ) 
        (Oil[o].lead - Gas[g].lead) * Blend[o][g] &lt;= 0;
}

execute DISPLAY_REDUCED_COSTS{
  for( var g in Gasolines ) {
    writeln("a[",g,"].reducedCost = ",a[g].reducedCost);
  }
}</code></pre>
</div>
<div class="example" id="usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1046949"><h2 class="title sectiontitle">Data
for the oil-blending planning problem (<samp class="ph codeph">oil.dat</samp>) </h2><pre class="pre codeblock"><code>Gasolines = { "Super", "Regular", "Diesel" };
Oils = { "Crude1", "Crude2", "Crude3" };

Gas = [ &lt;3000, 70, 10, 1&gt;,
        &lt;2000, 60, 8, 2&gt;,
        &lt;1000, 50, 6, 1&gt; ];
        
Oil = [ &lt;5000, 45, 12, 0.5&gt;,
        &lt;5000, 35, 6,  2&gt;,
        &lt;5000, 25, 8,  3&gt; ];
        

MaxProduction = 14000;
ProdCost = 4;</code></pre>
</div>
<p class="p">The model uses two sets of variables. Variable <samp class="ph codeph">a[Gasolines]</samp> represents
the amount spent in advertising gasoline <samp class="ph codeph">g</samp>. Variable <samp class="ph codeph">Blend[Oils][Gasolines]</samp> represents
the number of barrels of crude oil <samp class="ph codeph">o</samp> used to produced
gasoline <samp class="ph codeph">g</samp>.</p>
<p class="p">The demand constraint:</p>
<pre class="pre codeblock"><code>  forall( g in Gasolines )
    ctDemand: 
      sum( o in Oils ) 
        Blend[o][g] == Gas[g].demand + 10*a[g];</code></pre>
<p class="p">uses both types of variable, since <samp class="ph codeph">sum(o in Oils) Blend[o][g]</samp> represents
the amount of gasoline <samp class="ph codeph">g</samp> produced daily.</p>
<p class="p">The capacity constraint:</p>
<pre class="pre codeblock"><code>  forall( o in Oils )
    ctCapacity:   
      sum( g in Gasolines ) 
        Blend[o][g] &lt;= Oil[o].capacity;</code></pre>
<p class="p">enforces the capacity limitation for each type of oil.</p>
<p class="p">The constraints <samp class="ph codeph">ctOctane</samp> and <samp class="ph codeph">ctLead</samp></p>
<pre class="pre codeblock"><code>  forall( g in Gasolines )
    ctOctane: 
      sum( o in Oils ) 
        (Oil[o].octane - Gas[g].octane) * Blend[o][g] &gt;= 0;
  forall( g in Gasolines )
    ctLead:
      sum( o in Oils ) 
        (Oil[o].lead - Gas[g].lead) * Blend[o][g] &lt;= 0;</code></pre>
<p class="p">enforce the quality criteria for the gasoline.</p>
<p class="p">The objective function has four parts: the sales price of the gasoline,
the purchase cost of the crude oils, the production costs, and the
advertising costs.</p>
<pre class="pre codeblock"><code>maximize
  sum( g in Gasolines , o in Oils )
    (Gas[g].price - Oil[o].price - ProdCost) * Blend[o][g] 
    - sum(g in Gasolines) a[g];</code></pre>
<div class="section" id="usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1049417"><h2 class="title sectiontitle">A
solution to oil.mod</h2><p class="p">For
the instance data given in <a class="xref" href="opl_languser_app_areas_LP_blend.html#usropllangtut.uss_langtut_linearInteger.1018159__usropllangtut.uss_langtut_linearInteger.1046949">Data for the oil-blending planning problem (oil.dat)</a>,
the optimal solution to this problem is </p>
<pre class="pre codeblock"><code>Final Solution with objective 287750.0000:
  blend = [[2088.8889 2111.1111 800.0000]
            [777.7778 4222.2222 0.0000]
            [133.3333 3166.6667 200.0000]];
  a = [0.0000 750.0000 0.0000]; </code></pre>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/opllanguser/topics/opl_languser_app_areas_LP.html" title="Defines linear programming and describes a simple production planning problem, a multiperiod production planning problem, a blending problem, and sensitivity analysis.">Linear programming</a></div>
</div>
</div></body>
</html>