<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Preparatory steps" />
<meta name="abstract" content="Before you can work with an SPSS stream in CPLEX Studio, you need to take some preparatory steps." />
<meta name="Description" content="Before you can work with an SPSS stream in CPLEX Studio, you need to take some preparatory steps." />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/spss_tutorial/topics/opl_spss_tutorial_intro.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="descriptiveTopic1309276846081" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/spss_tutorial/topics/opl_spss_tutorial_intro.html" />
<title>Preparatory steps</title>
</head>
<body role="main" id="descriptiveTopic1309276846081">
<h1 class="title topictitle1">Preparatory steps</h1>
<div class="body"><p class="shortdesc">Before you can work with an SPSS stream in CPLEX Studio,
you need to take some preparatory steps.</p>
<ul class="ul"><li class="li"><p class="p"><a class="xref" href="opl_spss_tutorial_prepa.html#descriptiveTopic1309276846081__section1313674024033">Enabling SPSS Modeler</a> in
CPLEX Studio</p>
</li>
<li class="li"><p class="p"><a class="xref" href="#descriptiveTopic1309276846081__section_ax2_bzy_2r">Setting the SPSS Modeler demos environment variable</a></p>
 </li>
<li class="li"><p class="p"><a class="xref" href="opl_spss_tutorial_prepa.html#descriptiveTopic1309276846081__section1313674221050">Setting the SPSS Modeler environment variable</a></p>
</li>
<li class="li"><p class="p"><a class="xref" href="opl_spss_tutorial_prepa.html#descriptiveTopic1309276846081__section1313674314863">Importing an SPSS data stream into the IDE</a></p>
</li>
<li class="li"><p class="p"><a class="xref" href="opl_spss_tutorial_prepa.html#descriptiveTopic1309276846081__section1321883956058">Adapting the SPSS stream for CPLEX Studio</a></p>
</li>
</ul>
<div class="section" id="descriptiveTopic1309276846081__section1313674024033"><h2 class="title sectiontitle">Enabling SPSS Modeler</h2><ol class="ol"><li class="li"><p class="p">Launch the CPLEX Studio IDE.</p>
</li>
<li class="li"><p class="p">Ensure that the IDE preferences indicate the installation path
for SPSS Modeler.</p>
<p class="p">Click <span class="ph menucascade"><span class="ph uicontrol">Window </span> &gt; <span class="ph uicontrol"> Preferences</span></span> and select <span class="ph uicontrol">SPSS</span>. The installation path below shows the 64-bit
version of  SPSS Modeler.</p>
 <div class="image"><img class="image" src="../images/spss_preferences.jpg" alt="SPSS Installation directory in Preferences window" /></div> </li>
<li class="li"><p class="p">You should see SPSS in the <span class="ph uicontrol">Import</span> list.
If you do not see the option, close the IDE and reopen it.</p>
 <div class="image"><img class="image" src="../images/spss_import_command.jpg" alt="Menu File&gt;Import&gt;SPSS Import" /></div> </li>
</ol>
</div>
<div class="section" id="descriptiveTopic1309276846081__section_ax2_bzy_2r"><h2 class="title sectiontitle">Setting the SPSS Modeler demos environment
variable</h2><p class="p">In order to use the stream examples provided with SPSS Modeler
connected to OPL, you must set the CLEO_DEMOS environment variable so that the data files referenced
in these streams can be found. For example, on Windows 64-bit:</p>
<p class="p"><span class="ph menucascade"><span class="ph uicontrol">Start </span> &gt; <span class="ph uicontrol"> Control Panel </span> &gt; <span class="ph uicontrol"> System </span> &gt; <span class="ph uicontrol"> Advanced </span> &gt; <span class="ph uicontrol"> Environment Variables </span> &gt; <span class="ph uicontrol"> New</span></span></p>
<p class="p">Variable name: <samp class="ph codeph">CLEO_DEMOS</samp></p>
<p class="p">Variable value:
<samp class="ph codeph">C:\Program Files\IBM\SPSS\Modeler64\16\Demos</samp></p>
<p class="p">You are advised to restart the
IDE after setting the environment variable, to avoid problems when running the optimization model
later in this tutorial.</p>
</div>
<div class="section" id="descriptiveTopic1309276846081__section1313674221050"><h2 class="title sectiontitle">Setting the SPSS Modeler
environment variable</h2><p class="p">The OPL run time software needs
to find a valid SPSS installation. If SPSS Modeler is not installed
in the default folder (C:\Program Files\IBM\SPSS\Modeler64\16), you
need to define the environment variable <samp class="ph codeph">OPL_SPSS_HOME</samp> with
the alternative installation path as its value.</p>
<p class="p">If this environment
variable is absent, OPL will search in the default SPSS installation
location.</p>
<p class="p">You are advised to restart the IDE after setting the
environment variable, to avoid problems when running the optimization
model later in this tutorial.</p>
</div>
<div class="section" id="descriptiveTopic1309276846081__section1313674314863"><h2 class="title sectiontitle">Importing an SPSS data stream
into the IDE</h2><p class="p">The
example stream we use in this tutorial is <samp class="ph codeph">pm_selflearn.str</samp>,
and can be found in the <samp class="ph codeph">Demos</samp> directory of your SPSS
Modeler installation. For example:</p>
<p class="p"><samp class="ph codeph">C:\Program Files\IBM\SPSS\Modeler64\16\Demos\streams\pm_selflearn.str</samp></p>
<ol class="ol"><li class="li"> <p class="p">Create a new, empty OPL project in the IDE (<span class="ph menucascade"><span class="ph uicontrol">File </span> &gt; <span class="ph uicontrol"> New </span> &gt; <span class="ph uicontrol"> OPL
Project</span></span>) and name it <samp class="ph codeph">spss_example</samp>.</p>
 <p class="p">Check
the box <span class="ph uicontrol">Add a default Run Configuration</span>. You
will need a default run configuration later in this tutorial.</p>
 </li>
<li class="li"> <p class="p">Right-click <samp class="ph codeph">spss_example</samp> and import the SPSS stream
<samp class="ph codeph">pm_selflearn.str</samp>. (<span class="ph menucascade"><span class="ph uicontrol">File</span> &gt; <span class="ph uicontrol">Import</span> &gt; <span class="ph uicontrol"> SPSS Import</span></span>).</p>
 <div class="image"><img class="image" src="../images/stream_import_wizard.jpg" alt="Importing a stream into the OPL IDE using the SPSS Import Wizard" /></div> </li>
</ol>
</div>
<div class="section" id="descriptiveTopic1309276846081__section1321883956058"><h2 class="title sectiontitle">Adapting the SPSS stream for CPLEX
Studio</h2><p class="p">OPL cannot
process SPSS terminal nodes; it processes only operation nodes such as Filter. You must, therefore,
modify SPSS streams so that OPL can use them.</p>
<ol class="ol"><li class="li"><p class="p">In the IDE, right-click the stream <samp class="ph codeph">pm_selflearn.str</samp> and select <span class="ph menucascade"><span class="ph uicontrol">Open With</span> &gt; <span class="ph uicontrol"> SPSS Modeler</span></span>.</p>

<div class="image"><img class="image" src="../images/open_with_spss_command.jpg" alt="Open With &gt; SPSS Modeler command after a right-click on the stream in the IDE" /></div>
<p class="p">SPSS Modeler opens with the stream <samp class="ph codeph">pm_selflearn.str</samp> in the editor.</p>
</li>
<li class="li"><p class="p">If you run the SPSS stream as it is (run <samp class="ph codeph">pm_customer_train3.sav</samp>), it will
display a very big result table containing all possible fields. In order to display only the fields
of interest for this example, you need to insert an operation node, such as a Filter node, between
the campaign node and the result table, and edit the Filter.</p>

<p class="p">Drag the <span class="ph uicontrol">Filter</span> node from the <span class="ph uicontrol">Field Ops</span> tab into
the editor.</p>
</li>
<li class="li"><p class="p">Insert the <span class="ph uicontrol">Filter</span> node between the <span class="ph uicontrol">campaign</span> node
and the terminal node, <span class="ph uicontrol">Table</span>. (Drag the connecting arrow <span class="ph uicontrol">campaign
--&gt; Table</span> to <span class="ph uicontrol">Filter</span>. The line will split into two connecting
arrows,  <span class="ph uicontrol">campaign --&gt; Filter</span> and <span class="ph uicontrol">Filter --&gt;
Table</span>.)</p>

<p class="p">The stream now looks like this in the editor.</p>

<div class="image"><img class="image" src="../images/stream_adapted.jpg" alt="In SPSS Modeler, Filter inserted between operation node and termination node." /></div></li>
<li class="li"><p class="p">To edit the <span class="ph uicontrol">Filter</span> node, right-click the node and select
<span class="ph uicontrol">Edit</span>, or double-click the node.</p>
</li>
<li class="li"><p class="p">Click the <span class="ph uicontrol">Filter options</span> button <img class="image" src="../images/stream_filter_options_icon.jpg" alt="Filter options icon in SPSS Modeler" /> to display the list of options and select <span class="ph uicontrol">Remove All Fields</span>.</p>

<div class="image"><img class="image" src="../images/edit_stream_filter_1.jpg" alt="List of filter options in SPSS Modeler" /></div>
<p class="p">The arrows are crossed out. Click a red cross to select each field you want to keep. For this
example, you need the following five fields:</p>

<p class="p"><samp class="ph codeph">customer_id, $S-campaign-1, $SC-campaign-1, $S-campaign-2, $SC-campaign-2</samp>.</p>
</li>
<li class="li"><p class="p">Here we see the last four fields, at the bottom of the table, selected.</p>

<div class="image"><img class="image" src="../images/edit_stream_filter_2.jpg" alt="Fields to keep in the Filter node." /></div>
<p class="p">Click <span class="ph uicontrol">Apply</span> to save your changes.</p>
</li>
<li class="li"><p class="p">(Optional step). OPL cannot process the characters $, &amp;, #, %, -, ., or an empty string.
When you work in CPLEX Studio, OPL automatically replaces these characters with an underscore (_).
So, for example, $S-campaign-1 is renamed _S_campaign_1. You can modify the output fields directly
in the SPSS filter before running the model in CPLEX Studio, if you prefer.</p>
<p class="p">Double click in
the field on the right to edit the field. Replace the $ sign and the character "-" with the
underscore "_".  The fields now look like this (the underscore is hidden by the lines of the
table).</p>
<img class="image" src="../images/stream_modified_chars.jpg" alt="Modified fields in a Filter node." /><p class="p">Click <span class="ph uicontrol">Apply</span> then <span class="ph uicontrol">OK</span> to close the Filter
node.</p>
</li>
<li class="li"><p class="p">Run the stream in SPSS Modeler to check that the results table contains only the five required
fields.</p>

<p class="p">Right-click <samp class="ph codeph">pm_customer_train3.sav</samp> and select <span class="ph uicontrol">Run From
Here</span>. The table should look like this:</p>

<div class="image"><img class="image" src="../images/stream_modified_table.jpg" alt="Modified table in SPSS Modeler" /></div></li>
<li class="li"><p class="p">Save the stream and exit SPSS Modeler.</p>
</li>
<li class="li">In the OPL IDE, <strong class="ph b">move the focus to the OPL projects panel and refresh (F5 key)</strong> so that OPL
can access the edited stream.</li>
</ol>
<div class="note note"><span class="notetitle">Note:</span> <p class="p">You cannot modify streams in OPL, so any changes to streams must be made with SPSS Modeler.</p>
</div>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/spss_tutorial/topics/opl_spss_tutorial_intro.html" title="The SPSS Connector connects IBM SPSS Modeler to IBM ILOG CPLEX Studio and enables you to read data from an SPSS stream into an OPL tuple set. The SPSS Connector is available on Windows 32-bit and 64-bit platforms.">SPSS Connector in CPLEX Studio</a></div>
</div>
</div></body>
</html>