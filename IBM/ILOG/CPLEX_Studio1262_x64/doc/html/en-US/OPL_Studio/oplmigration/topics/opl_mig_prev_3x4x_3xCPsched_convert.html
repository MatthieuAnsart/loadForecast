<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="task" />
<meta name="DC.Title" content="Converting an OPL 3.x CP Scheduling model" />
<meta name="abstract" content="Provides a procedure to convert an OPL 3.x CP model to an OPL 6.x model." />
<meta name="Description" content="Provides a procedure to convert an OPL 3.x CP model to an OPL 6.x model." />
<meta name="DC.subject" content="models, migrating from OPL 3.x to OPL 6.x with CP" />
<meta name="keywords" content="models, migrating from OPL 3.x to OPL 6.x with CP" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xCPsched.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="proceduralTopic1206644741194" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xCPsched.html" />
<title>Converting an OPL 3.x CP Scheduling model</title>
</head>
<body role="main" id="proceduralTopic1206644741194">
<h1 class="title topictitle1">Converting an OPL 3.x CP Scheduling model</h1>
<div class="body taskbody"><p class="shortdesc">Provides a procedure to convert an OPL 3.x CP model to
an OPL 6.x model.</p>
<div class="section prereq"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Before you begin</h2></div><p class="p">If your model contains any scheduling features such as
activities or resources, you should also read the <a class="xref" href="opl_mig_prev_3x4x_3xCPsched.html" title="Provides a quick-reference list of the changes you need to make to an existing OPL 3.x model that uses CP Scheduling for it to be compatible with OPL 6.x.">Migration from OPL 3.x (CP Scheduling projects)</a>section of the Migration Guide.</p>
</div>
<div class="section context"><div class="tasklabel"><h2 class="sectiontitle tasklabel">About this task</h2></div><p class="p">Here is a procedure to help users get started with converting
an OPL 3.x model and become familiar with OPL 6.x constraint programming
features. It involves migrating non-CP statements and therefore includes
references to <a class="xref" href="opl_mig_prev_3x4x_3xnoCP.html" title="Provides a quick-reference list of the changes you need to make to most OPL 3.x models for them to be compatible with OPL 6.x.">Migration from OPL 3.x (non-CP projects)</a> in this Migration Guide.</p>
</div>
<div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><p class="li stepsection"><p class="p">To convert an OPL 3.x model:</p>
</p><ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Using OPL 6.x or a text editor, create a copy of the
model that uses only flat data in a separate <samp class="ph codeph">.dat</samp> file. By doing so, you will postpone the connection to Excel or
to database data until after your model is converted and tested.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Make a copy of your model (<samp class="ph codeph">.mod</samp>) and data (<samp class="ph codeph">.dat</samp>) files, and load them
into a new OPL 6.x project.</span> <p class="p">See <a class="xref" href="../../gsoplide/topics/opl_ide_gs_tut_create_proj.html" title="Walks you through creating a project file, adding model and data, and setting mathematical programming options.">Creating a project</a> in <em class="ph i">Getting Started with the IDE</em> if you are not familiar with the OPL 6.x graphical user interface.</p>
</li>
<li class="li step stepexpand"><span class="ph cmd">Add the statement <samp class="ph codeph">using CP;</samp> at the top of the model file.</span></li>
<li class="li step stepexpand"><span class="ph cmd">Comment out the constraints and modify the data and the
variables declarations.</span> <p class="p">For each type of variable declaration of OPL 3.x, please
see the corresponding OPL 6.x language element:</p>
<ul class="ul"><li class="li"><p class="p">Transition times: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_trans.html" title="Explains how to model transition times in OPL 6.x">Transition times</a></p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">UnaryResource</samp>: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_disj.html" title="Explains how to model disjunctive resources in OPL 6.x.">Disjunctive resources</a></p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">DiscreteResource</samp>: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_cum.html" title="Explains how to model cumulative resources in OPL 6.x.">Cumulative resources</a></p>
</li>
<li class="li"><p class="p">Reservoirs: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_cum.html" title="Explains how to model cumulative resources in OPL 6.x.">Cumulative resources</a></p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">StateResource</samp>: State resources (NEW) <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_state.html" title="Explains how to model state resources in OPL 6.x.">State resources</a></p>
</li>
</ul>
<p class="p">See <a class="xref" href="opl_mig_prev_3x4x_3xnoCP_declare.html" title="Lists the changes to make to data and variable declarations in an OPL 3.x model for compatibility OPL 4 and later">Declaration of data and variables</a>. </p>
<p class="p">After this step, you can check that your data is correctly
loaded.</p>
</li>
<li class="li step stepexpand"><span class="ph cmd">If your model preprocesses the data, migrate the preprocessing
instructions as follows:</span> <ul class="ul"><li class="li"><p class="p">If you use simple OPL Script statements,
translate them to ILOG Script. See <a class="xref" href="opl_mig_prev_3x4x_3xnoCP_script.html" title="Lists the changes to make to script statements in an OPL 3.x model for compatibility with OPL 4 and later.">Scripting</a>.</p>
</li>
<li class="li"><p class="p">Modify the function calls. See <a class="xref" href="opl_mig_prev_3x4x_3xnoCP_func.html" title="Lists the changes to make to functions in an OPL 3.x model for compatibility with OPL 4 and later.">Functions</a>.</p>

<div class="note note"><span class="notetitle">Note:</span> <p class="p">OPL does not evaluate preprocessed data unless they are
used. To force the evaluation in your tests, you can add a script
statement, such as: </p>

<p class="p"> <samp class="ph codeph">execute</samp> </p>

<p class="p"> <samp class="ph codeph">{</samp> </p>

<p class="p"> <samp class="ph codeph">   myPreprocessedData;</samp> </p>

<p class="p"> <samp class="ph codeph">}</samp> </p>
</div>
</li>
<li class="li"><p class="p">Be aware of lazy instantiation. See <a class="xref" href="../../opllangref/topics/opl_langref_datasources_preprocessing.html" title="Provides an overview of preprocessing operations in OPL.">Preprocessing of data</a> in the <em class="ph i">Language Reference Manual</em>.</p>
</li>
</ul>
</li>
<li class="li step stepexpand"><span class="ph cmd">Uncomment the constraints and modify them as follows:</span> <ul class="ul"><li class="li"><p class="p">If you used the keyword <samp class="ph codeph">solve</samp>, replace it by <samp class="ph codeph">constraints</samp> (or <samp class="ph codeph">subject to</samp>).</p>
</li>
<li class="li"><p class="p">Modify the arithmetic and logical operators
for your preprocessing code or your constraints.</p>
</li>
<li class="li"><p class="p">See <a class="xref" href="opl_mig_prev_3x4x_3xnoCP_constraint.html" title="Lists the changes to make to constraints in an OPL 3.x model for compatibility with OPL 4 and later.">Constraints</a>.</p>
</li>
<li class="li"><p class="p">Modify the specialized constraints such
as <samp class="ph codeph">predicate</samp>, <samp class="ph codeph">sequence</samp> etc.</p>
<p class="p">See <a class="xref" href="opl_mig_prev_3x4x_3xCP_cstr.html" title="Describes the keywords affected by the changes of syntax to express constraint programming.">Constraints, functions, and operators</a>.</p>
</li>
<li class="li"><p class="p">Modify specialized scheduling constraints.
For each type of scheduling constraint of OPL 3.7, please see the
corresponding OPL 6.x language element:</p>

<ul class="ul"><li class="li"><p class="p">Precedence constraints: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_prec.html" title="Explains the use of precedence constraints in OPL 6.x.">Precedence constraints</a></p>
</li>
<li class="li"><p class="p">Breaks on <samp class="ph codeph">UnaryResource</samp>: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_breaks.html" title="Explains how to model breaks using the OPL 6.x concept of interval variable intensity.">Breaks and interval variable intensities</a></p>
</li>
<li class="li"><p class="p">Requirements of <samp class="ph codeph">UnaryResource</samp>: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_disj.html" title="Explains how to model disjunctive resources in OPL 6.x.">Disjunctive resources</a></p>
</li>
<li class="li"><p class="p">Requirements of DiscreteResource: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_cum.html" title="Explains how to model cumulative resources in OPL 6.x.">Cumulative resources</a></p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">CapacityMin</samp>, <samp class="ph codeph">CapacityMax</samp> of <samp class="ph codeph">DiscreteResource</samp>: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_cum.html" title="Explains how to model cumulative resources in OPL 6.x.">Cumulative resources</a></p>
</li>
<li class="li"><p class="p">Requirements of Reservoir: <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_cum.html" title="Explains how to model cumulative resources in OPL 6.x.">Cumulative resources</a></p>
</li>
<li class="li"><p class="p">Requirements of <samp class="ph codeph">StateResource</samp>:State resources <a class="xref" href="opl_mig_prev_3x4x_3xCPsched_lang_state.html" title="Explains how to model state resources in OPL 6.x.">State resources</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="li step stepexpand"><span class="ph cmd">Test your model and see if it is required to declare
search phases.</span> <p class="p"><a class="xref" href="opl_mig_prev_3x4x_3xCP_search.html" title="Once you have ported the data declaration and the constraints of your OPL model, verify whether the default search yields a satisfying performance and result or whether you need to declare search phases.">Declaring search phases</a>.</p>
</li>
<li class="li step stepexpand"><span class="ph cmd">If your model uses Excel or database data, reconnect
them.</span> <p class="p">See <a class="xref" href="opl_mig_prev_3x4x_3xnoCP_data.html" title="Lists the changes to make to input data in OPL 3.x for compatibility with OPL 4 and later.">Data</a>.</p>
</li>
<li class="li step stepexpand"><span class="ph cmd">Test your model with real data and modify the search
phases if necessary.</span></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xCPsched.html" title="Provides a quick-reference list of the changes you need to make to an existing OPL 3.x model that uses CP Scheduling for it to be compatible with OPL 6.x.">Migration from OPL 3.x (CP Scheduling projects)</a></div>
</div>
</div></body>
</html>