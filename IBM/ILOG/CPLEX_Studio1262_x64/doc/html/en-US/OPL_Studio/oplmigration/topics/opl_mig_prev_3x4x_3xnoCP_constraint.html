<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Constraints" />
<meta name="abstract" content="Lists the changes to make to constraints in an OPL 3.x model for compatibility with OPL 4 and later." />
<meta name="Description" content="Lists the changes to make to constraints in an OPL 3.x model for compatibility with OPL 4 and later." />
<meta name="DC.subject" content="constraints, changes from 3.x to 4.x and later" />
<meta name="keywords" content="constraints, changes from 3.x to 4.x and later" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xnoCP.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="descriptiveTopic1204226809487" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xnoCP.html" />
<title>Constraints</title>
</head>
<body role="main" id="descriptiveTopic1204226809487">
<h1 class="title topictitle1">Constraints</h1>
<div class="body"><p class="shortdesc">Lists the changes to make to constraints in an OPL 3.x
model for compatibility with OPL 4 and later.</p>
<ol class="ol"><li class="li"><p class="p">Replace operators as indicated in the
following table.</p>

<div class="cautiontitle">CAUTION:</div><div class="note caution"><p class="p">Take care not to replace <samp class="ph codeph">&lt;=</samp> with <samp class="ph codeph">&lt;==</samp> and <samp class="ph codeph">&gt;=</samp> with <samp class="ph codeph">&gt;==</samp>. </p>
</div>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="descriptiveTopic1204226809487__oplrelnotes.uss_reln_migration3to4.1027947" class="table ShadedHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 1. Operators</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" width="33.33333333333333%" id="d789508e44">Operator</th>
<th class="entry" align="left" valign="top" width="33.33333333333333%" id="d789508e46">OPL 3</th>
<th class="entry" align="left" valign="top" width="33.33333333333333%" id="d789508e48">OPL 4 and later</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Equality</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">=</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">==</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Different from</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">&lt;&gt;</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">!=</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Logical AND</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">&amp;</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">&amp;&amp;</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Logical OR (disjunction)</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">\/</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">||</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Assignment of constraints</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">:</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">=</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Integer division</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">/</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">div</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" width="33.33333333333333%" headers="d789508e44 ">Modulo</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e46 ">mod</td>
<td class="entry" valign="top" width="33.33333333333333%" headers="d789508e48 ">%</td>
</tr>
</tbody>
</table>
</div>
</li>
<li class="li"><p class="p">In <samp class="ph codeph">forall</samp>statements, replace the ampersand with a comma.</p>

<p class="p">For example, this block (from <samp class="ph codeph">transp4.mod</samp>):</p>

<pre class="pre codeblock"><code>subject to {
   forall(p in Products &amp; o in orig[p]) 
      sum(&lt;o,d&gt; in CP[p]) trans[&lt; p,&lt;o,d&gt; &gt;] = supply[&lt;p,o&gt;];
   forall(p in Products &amp; d in dest[p]) 
      sum(&lt;o,d&gt; in CP[p]) trans[&lt; p,&lt;o,d&gt; &gt;] = demand[&lt;p,d&gt;];
   forall(c in Connections)
      sum(&lt;p,c&gt; in Routes) trans[&lt;p,c&gt;] &lt;= capacity;
}; </code></pre>

<p class="p">becomes:</p>

<pre class="pre codeblock"><code>subject to {
  forall( p in Products , o in Orig[p] ) 
      ctSupply[p][o]: 
        sum( &lt;o,d&gt; in CP[p] ) 
          Trans[&lt; p,&lt;o,d&gt; &gt;] == Supply[&lt;p,o&gt;];
    forall( p in Products , d in Dest[p] ) 
      ctDemand[p][d]:  
        sum( &lt;o,d&gt; in CP[p] ) 
          Trans[&lt; p,&lt;o,d&gt; &gt;] == Demand[&lt;p,d&gt;];
    forall( c in Connections )
      ctCapacity:
        sum( &lt;p,c&gt; in Routes ) 
          Trans[&lt;p,c&gt;] &lt;= Capacity;
}</code></pre>
</li>
<li class="li"><p class="p">For conditional constraint posting,
replace the syntax</p>

<pre class="pre codeblock"><code>if ... then ... endif
if ... then ... else ... endif</code></pre>

<p class="p">with the syntax</p>

<pre class="pre codeblock"><code>if (...) { ... }
if (...) { ... } else { ... }</code></pre>

<p class="p">See <a class="xref" href="opl_mig_reln_40_mod_patt.html#oplrelnotes.uss_reln_from37to40.1023013">if/then/else</a>.</p>
</li>
<li class="li"><p class="p">Rewrite range expressions so as to use
no more than three operands in each expression. For example, write</p>

<pre class="pre codeblock"><code>x &lt;= y &lt;= z;
z &lt;= t;
d &lt; c &lt; b;
b &lt; a;</code></pre>

<p class="p">instead of</p>

<pre class="pre codeblock"><code>x &lt;= y &lt;= z &lt;= t;
a &gt; b &gt; c &gt; d;</code></pre>

<p class="p">Moreover, range expressions such as</p>

<pre class="pre codeblock"><code>a op x op2 b</code></pre>

<p class="p">need to have ground expressions for operands <samp class="ph codeph">a,</samp> <samp class="ph codeph">b</samp>.</p>
</li>
<li class="li"><p class="p">Terminate objectives with a semi-colon
(;). See <a class="xref" href="opl_mig_reln_40_mod_obj.html" title="Describes syntax changes in the objectives.">Objectives</a>.</p>
</li>
<li class="li"><p class="p">Reduce aggregate piecewise to one-piece
statements only. For example, write</p>

<pre class="pre codeblock"><code>piecewise(i in R) { slopes[i] -&gt; breakPoints[i]; 0 } x;</code></pre>

<p class="p">instead of</p>

<pre class="pre codeblock"><code>piecewise { forall(i in R) slopes[i] -&gt; breakPoints[i]; 0 } x;</code></pre>
</li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/oplmigration/topics/opl_mig_prev_3x4x_3xnoCP.html" title="Provides a quick-reference list of the changes you need to make to most OPL 3.x models for them to be compatible with OPL 6.x.">Migration from OPL 3.x (non-CP projects)</a></div>
</div>
</div></body>
</html>