<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Pattern for procedural function call" />
<meta name="abstract" content="Compares data and variable types in OPL 3 and OPL 4." />
<meta name="Description" content="Compares data and variable types in OPL 3 and OPL 4." />
<meta name="DC.subject" content="function calls, functions, on strings, intValue function on strings, floatValue, OPL function, matchAt, OPL function, length function on strings, sets, conditional constraints, constraints, syntax of conditions, if-then-else, in 4.0, aggregated piecewise" />
<meta name="keywords" content="function calls, functions, on strings, intValue function on strings, floatValue, OPL function, matchAt, OPL function, length function on strings, sets, conditional constraints, constraints, syntax of conditions, if-then-else, in 4.0, aggregated piecewise" />
<meta name="DC.Relation" scheme="URI" content="../../../OPL_Studio/oplmigration/topics/opl_mig_reln_40_mod.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="oplrelnotes.uss_reln_from37to40.1036649" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../OPL_Studio/oplmigration/topics/opl_mig_reln_40_mod.html" />
<title>Pattern for procedural function call</title>
</head>
<body role="main" id="oplrelnotes.uss_reln_from37to40.1036649">
<h1 class="title topictitle1">Pattern for procedural function call</h1>
<div class="body"><p class="shortdesc">Compares data and variable types in OPL 3 and OPL 4.</p>
<p class="p">All the API on data and variable types is now in the
form of functions. In other words, no more object-oriented-like syntax
is used on strings and sets. </p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../OPL_Studio/oplmigration/topics/opl_mig_reln_40_mod.html" title="Describes the changes made to the syntax and types to improve the consistency of the modeling language.">The modeling language</a></div>
</div>
</div><div class="topic nested1" xml:lang="en-us" id="oplrelnotes.uss_reln_from37to40.1029717"><h2 class="title topictitle2">Strings in the modeling part</h2>
<div class="body"><p class="p">The only functions available on strings in the modeling
part are:</p>
<ul class="ul"><li class="li"><p class="p"><samp class="ph codeph">intValue</samp> </p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">floatValue</samp> </p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">matchAt</samp> </p>
</li>
<li class="li"><p class="p"><samp class="ph codeph">length</samp> </p>
</li>
</ul>
<p class="p">They are called as functions (instead of methods, as
in OPL 3).</p>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1029717__oplrelnotes.uss_reln_from37to40.1029724"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote in OPLScript:</p>
<pre class="pre codeblock"><code>string fs := "3.14";
float f := fs.floatValue();
string is := "2701";
int i := is.intValue();
string digit := "0123456789";
int l := digit.length();
string s := "foobarfoo";
int n := s.matchAt("bar");</code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1029717__oplrelnotes.uss_reln_from37to40.1029733"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write in OPL:</p>
<pre class="pre codeblock"><code>string fs = "3.14";
float f = floatValue(fs);
string is = "2701";
int i = intValue(is);
string digit = "0123456789";
int l = length(digit);
string s = "foobarfoo";
int n = matchAt(s, "bar");</code></pre>
<p class="p">Note that in scripting blocks, the API of strings follows
the object-oriented syntax, i.e. uses method calls. For example:</p>
<pre class="pre codeblock"><code>execute display {
writeln("digit.length ", digit.length);
writeln("s.indexOf(\"bar\") ", s.indexOf("bar"));
}</code></pre>
<p class="p">See <a class="xref" href="../../opllangref/topics/opl_langref_script.html" title="Describes the structure and built-in values and functions of the scripting language.">IBM ILOG Script for OPL</a> in the <em class="ph i">Language
Reference Manual</em>.</p>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="oplrelnotes.uss_reln_from37to40.1022989"><h2 class="title topictitle2">Sets</h2>
<div class="body"><div class="section" id="oplrelnotes.uss_reln_from37to40.1022989__oplrelnotes.uss_reln_from37to40.1027337"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote:</p>
<pre class="pre codeblock"><code>int n = s.card();
int n1 = s.first();
int n2 = s.next(2);
int n3 = s.ord(3);</code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1022989__oplrelnotes.uss_reln_from37to40.1027322"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write:</p>
<pre class="pre codeblock"><code>int n = card(s);
int n1 = first(s);
int n2 = next(s,2);
int n3 = ord(s,3);</code></pre>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="oplrelnotes.uss_reln_from37to40.1023001"><h2 class="title topictitle2">The enum concept</h2>
<div class="body"><div class="section" id="oplrelnotes.uss_reln_from37to40.1023001__oplrelnotes.uss_reln_from37to40.1027342"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote:</p>
<pre class="pre codeblock"><code>enum Days {Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday};
int n = card(Days);
Days d1 = first(Days);
Days d2 = next(Monday,3); // returns Thursday. </code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023001__oplrelnotes.uss_reln_from37to40.1027332"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write:</p>
<pre class="pre codeblock"><code>{string} Days = { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", 
"Saturday", "Sunday" };
int n = card(Days);
string d1 = first(Days);
string d2 = next(Days, "Monday", 3); // returns Thursday. </code></pre>
<p class="p">Use the <samp class="ph codeph">last</samp> and <samp class="ph codeph">prev</samp> functions in a similar way.</p>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="oplrelnotes.uss_reln_from37to40.1023013"><h2 class="title topictitle2">if/then/else</h2>
<div class="body"><p class="p">The syntax of conditional constraint posting has changed:</p>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023013__oplrelnotes.uss_reln_from37to40.1027349"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote:</p>
<pre class="pre codeblock"><code>if ... then ... endif
if ... then ... else ... endif</code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023013__oplrelnotes.uss_reln_from37to40.1027359"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write:</p>
<pre class="pre codeblock"><code>if (...) { ... }
if (...) { ... } else { ... }</code></pre>
<p class="p"><samp class="ph codeph">forall</samp> constructs are not
supported inside <samp class="ph codeph">if</samp> statements. </p>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023013__oplrelnotes.uss_reln_from37to40.1028131"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote:</p>
<pre class="pre codeblock"><code>forall(i in r)
   if (a1[i]=0)
      then
         vars[i]=a2[i]
      else 
         vars[i]=a2[i]/a1[i]
   endif</code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023013__oplrelnotes.uss_reln_from37to40.1027327"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write:</p>
<pre class="pre codeblock"><code>forall(i in r : a1[i]==0)
   vars[i]==a2[i];
forall(i in r : a1[i]!=0)
   vars[i]==a2[i]/a1[i]</code></pre>
</div>
</div>
</div>
<div class="topic nested1" xml:lang="en-us" id="oplrelnotes.uss_reln_from37to40.1023021"><h2 class="title topictitle2">Aggregated piecewise</h2>
<div class="body"><p class="p">Piecewise linear functions need to be aggregated into
one piece for OPL 4. </p>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023021__oplrelnotes.uss_reln_from37to40.1027383"><h3 class="title sectiontitle">In OPL 3</h3><p class="p">You wrote:</p>
<pre class="pre codeblock"><code>piecewise { forall(i in R) slopes[i] -&gt; breakPoints[i]; 0 } x;</code></pre>
</div>
<div class="section" id="oplrelnotes.uss_reln_from37to40.1023021__oplrelnotes.uss_reln_from37to40.1027388"><h3 class="title sectiontitle">In OPL 4</h3><p class="p">You write:</p>
<pre class="pre codeblock"><code>piecewise(i in R) { slopes[i] -&gt; breakPoints[i]; 0 } x;</code></pre>
</div>
</div>
</div>
</body>
</html>