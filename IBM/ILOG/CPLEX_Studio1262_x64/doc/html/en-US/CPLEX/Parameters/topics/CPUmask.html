<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="reference" />
<meta name="DC.Title" content="CPU mask and thread-binding switch" />
<meta name="abstract" content="Switch and mask to bind threads to processors" />
<meta name="Description" content="Switch and mask to bind threads to processors" />
<meta name="DC.subject" content="CPX_PARAM_CPUMASK, CPXPARAM_CPUmask, CPUmask, cpumask, processor affinity, multithreading, CPU mask" />
<meta name="keywords" content="CPX_PARAM_CPUMASK, CPXPARAM_CPUmask, CPUmask, cpumask, processor affinity, multithreading, CPU mask" />
<meta name="DC.Relation" scheme="URI" content="../../../CPLEX/Parameters/topics/introListAlpha.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="param_CPUmask" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../CPLEX/Parameters/topics/introListAlpha.html" />
<title>CPU mask and thread-binding switch</title>
</head>
<body role="main" id="param_CPUmask">
<h1 class="title topictitle1">CPU mask and thread-binding switch</h1>
<div class="body refbody"><p class="shortdesc">Switch and mask to bind threads to processors</p>
<div class="section"><h2 class="title sectiontitle">Purpose</h2>    
    <p class="p">Switch to bind threads to processors specified by mask</p>
</div>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" role="presentation" class="table presentation NoBorder" rules="none" frame="void" border="0"><thead class="thead" align="left"><tr class="row"><th class="entry" valign="top" width="12.5%" id="d142382e38">API</th>
<th class="entry" valign="top" width="50%" id="d142382e40">Parameter Name</th>
<th class="entry" valign="top" width="37.5%" id="d142382e42">Name prior to V12.6.0</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">C</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">CPXPARAM_CPUmask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 ">CPX_PARAM_CPUMASK</td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">C++</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">IloCplex::Param::CPUmask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">Java</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">IloCplex.Param.CPUmask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">.NET</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">Cplex.Param.CPUmask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">OPL</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 "> </td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">Python</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">parameters.cpumask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">MATLAB</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">Cplex.Param.cpumask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">Interactive</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">cpumask</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
<tr class="row"><td class="entry" valign="top" width="12.5%" headers="d142382e38 ">Identifier</td>
<td class="entry" valign="top" width="50%" headers="d142382e40 ">1144</td>
<td class="entry" valign="top" width="37.5%" headers="d142382e42 "> </td>
</tr>
</tbody>
</table>
</div>
<div class="section"><h2 class="title sectiontitle">Description</h2>
<div class="p">The value of this parameter serves as a switch to turn on (or 
to turn off) CPLEX binding of multiple threads to multiple processors 
on platforms where this feature is available.  Hexadecimal values of 
this parameter serve as a mask to specify to CPLEX 
which processors (or cores) to use in binding multiple threads to 
multiple processors. This parameter accomplishes a two-fold task: 
<ul class="ul"><li class="li">Calculate the number of threads to use, if any.</li>
<li class="li">Bind those threads to cores (or processors) as specified.</li>
</ul>
</div>

<p class="p">CPU binding is also sometimes known as <em class="ph i">processor affinity</em>.</p>


<ul class="ul"><li class="li"><p class="p">If the value is "off" in lower case, then 
CPLEX does not bind threads to cores (or processors).</p>
</li>
<li class="li"><p class="p">If the value is "auto" in lower case, then by 
<strong class="ph b">default</strong> CPLEX decides whether or not to bind 
threads to cores (or processors).</p>
</li>
<li class="li"><p class="p">Otherwise, CPLEX treats 
the value of this parameter as a string that resembles a 
hexadecimal number without the usual <samp class="ph codeph">0x</samp> prefix. 
A valid string consists of these elements:</p>

<ul class="ul"><li class="li">any digit from 0 (zero) through 9 (inclusive)</li>
<li class="li">any lower case character in the range a through f (inclusive)</li>
<li class="li">any upper case character in the range A through F (inclusive)</li>
</ul>

<p class="p">CPLEX rejects a string containing any other digits or characters than those.</p>

 
</li>
</ul>


<div class="p">When the value of this parameter is a valid string, 
each bit of this string corresponds to a central processing unit (CPU), 
that is, to a processor or core. The lowest order bit of the string 
corresponds to the first logical CPU, and the highest order corresponds to 
the last logical CPU. For example, 
<ul class="ul"><li class="li"><samp class="ph codeph">00000001</samp> designates processor #0.</li>
<li class="li"><samp class="ph codeph">00000003</samp> designates processors #0 and #1.</li>
<li class="li"><samp class="ph codeph">FFFFFFFF</samp> designates all processors #0 through #31.</li>
</ul>
</div>

<p class="p">CPLEX uses the <em class="ph i">i<sup class="ph sup">th</sup></em> CPU 
if and only if the  <em class="ph i">i<sup class="ph sup">th</sup></em> bit of this string is set to 1 (one).</p>


<p class="p"><strong class="ph b">Tip</strong>: For GNU/Linux users, this parameter behaves like the 
<samp class="ph codeph">taskset</samp> command (except that this parameter 
lacks the prefix <samp class="ph codeph">0x</samp>).</p>
</div>
<div class="section"><h2 class="title sectiontitle">Examples</h2>
<p class="p">If this CPU mask parameter is set to a valid string that designates a
hexadecimal number, but  <a class="xref" href="Threads.html" title="Sets the default number of parallel threads that will be invoked by any CPLEX parallel optimizer.">global thread count</a> 
remains at its default value, that is, 0 (zero), then CPLEX still starts as many threads as the 
number of cores on the machine, but only the cores enabled in the mask 
will be used. </p>

<ul class="ul"><li class="li"><p class="p">For example, if a user sets this CPU mask parameter to the 
hexadecimal value "f" on a 16-core machine, but the user does not set 
<a class="xref" href="Threads.html" title="Sets the default number of parallel threads that will be invoked by any CPLEX parallel optimizer.">global thread count</a> to a specific, non-default value, 
the result is 16 threads, four of those 16 threads will be bound to each 
of the first four cores; this situation is probably not what the user intended. 
Therefore, if you set this CPU mask parameter, then you should also set 
<a class="xref" href="Threads.html" title="Sets the default number of parallel threads that will be invoked by any CPLEX parallel optimizer.">global thread count</a>; indeed, you should set the threads 
parameter to the number of active cores designated by the mask.</p>
</li>
<li class="li"><p class="p">For example, consider a value, such as fff1, for this parameter.  In binary,
this hex value is equivalent to  1111 1111 1111 0001. If the machine has 
only four virtual cores, then CPLEX uses only one thread because 
only the last four bits refer to existing cores, and of those 
four bits referring to existing cores, only the bit at position 0 (zero) 
is set to 1 (one). Furthermore, in this example, CPLEX binds that 
sole thread to the specified <em class="ph i">0<sup class="ph sup">th</sup></em> core.</p>
</li>
<li class="li"><p class="p">For example, on a 16 core machine, consider the difference between the value 
"off" and the value ffff. If the value of this parameter is "off" CPLEX does 
no binding. If the value of this parameter is ffff, CPLEX binds threads to 
cores. </p>
</li>
</ul>
</div>
<div class="section"><h2 class="title sectiontitle">Terminology</h2>
<p class="p">The description of this parameter observes the following conventions 
in terminology.</p>

<p class="p">The term <em class="ph i">CPU</em> (that is, central processing unit)  
corresponds to a single chip; that chip may include multiple physical cores. </p>

<p class="p">The term <em class="ph i">physical cores</em> is synonymous with processors.</p>

<p class="p">The term <em class="ph i">logical cores</em> is synonymous with the term 
<em class="ph i">virtual cores</em>; these terms imply access to multiple threads 
running from a single core through such features as hyperthreading.</p>
</div>
<div class="section"><div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="A two-column table showing possible strings and their meaning." class="table PlainHead" rules="all" frame="border" border="1"><caption><span class="tablecap">Table 1. Values</span></caption><thead class="thead" align="left"><tr class="row" valign="top"><th class="entry" align="left" valign="top" id="d142382e270">String</th>
<th class="entry" align="left" valign="top" id="d142382e272">Meaning</th>
</tr>
</thead>
<tbody class="tbody"><tr class="row" valign="top"><td class="entry" valign="top" headers="d142382e270 ">"off"</td>
<td class="entry" valign="top" headers="d142382e272 ">CPLEX performs no binding.</td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d142382e270 ">"auto"</td>
<td class="entry" valign="top" headers="d142382e272 "><strong class="ph b">Default</strong> CPLEX decides whether 
to bind threads to cores (or processors). </td>
</tr>
<tr class="row" valign="top"><td class="entry" valign="top" headers="d142382e270 "><p class="p">A string consisting of digits or characters from the set {0-9, a-f, A-F}</p>
 </td>
<td class="entry" valign="top" headers="d142382e272 ">CPLEX binds the threads in round-robin fashion to the 
cores specified by the mask.</td>
</tr>
</tbody>
</table>
</div>


<p class="p"><strong class="ph b">Tip</strong>: In this context, round-robin fashion refers to the algorithm 
that repeats the cycle of assigning one thread to each core until all threads are 
assigned to a core (or processor).</p>
</div>
<div class="section"><h2 class="title sectiontitle">See also</h2>
<p class="p"><a class="xref" href="Threads.html" title="Sets the default number of parallel threads that will be invoked by any CPLEX parallel optimizer.">global thread count</a></p>
</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../CPLEX/Parameters/topics/introListAlpha.html" title="CPLEX parameters, documented here alphabetically by name in the Callable Library (C API), are available in the C++, Java, .NET, and Python APIs, as well as in the Interactive Optimizer, the MathWorks MATLAB connector, and the Excel Connector.">List of CPLEX parameters</a></div>
</div>
</div></body>
</html>