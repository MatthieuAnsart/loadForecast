<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="reference" />
<meta name="DC.Title" content="sameCommonSubsequence" />
<meta name="abstract" content="This function creates a same-common-subsequence constraint between two sequence variables." />
<meta name="Description" content="This function creates a same-common-subsequence constraint between two sequence variables." />
<meta name="DC.subject" content="sameCommonSubsequence" />
<meta name="keywords" content="sameCommonSubsequence" />
<meta name="DC.Relation" scheme="URI" content="../../../refcppcpoptimizer/html/interval_sequence.html" />
<meta name="DC.Relation" scheme="URI" content="sequenceVar.html" />
<meta name="DC.Relation" scheme="URI" content="intervalVar.html" />
<meta name="DC.Relation" scheme="URI" content="sameSequence.html" />
<meta name="DC.Relation" scheme="URI" content="../../../CP_Optimizer/reffileformatcpo/functions.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="sameCommonSubsequence" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../CP_Optimizer/reffileformatcpo/functions.html" />
<title>sameCommonSubsequence</title>
</head>
<body role="main" id="sameCommonSubsequence">
<h1 class="title topictitle1">sameCommonSubsequence</h1>
<div class="body refbody"><p class="shortdesc">This function creates a same-common-subsequence constraint between two sequence variables.</p>
<div class="section" id="sameCommonSubsequence__Syntax"><h2 class="title sectiontitle">Syntax</h2>
<pre class="pre codeblock"><code><a class="xref" href="../syntax/070_Types.html#Type_constraint">constraint</a> <strong class="ph b">sameCommonSubsequence</strong>(<a class="xref" href="../syntax/070_Types.html#Variable_types__sequenceVar">sequenceVar</a> seq1, <a class="xref" href="../syntax/070_Types.html#Variable_types__sequenceVar">sequenceVar</a> seq2)
<a class="xref" href="../syntax/070_Types.html#Type_constraint">constraint</a> <strong class="ph b">sameCommonSubsequence</strong>(<a class="xref" href="../syntax/070_Types.html#Variable_types__sequenceVar">sequenceVar</a> seq1, <a class="xref" href="../syntax/070_Types.html#Variable_types__sequenceVar">sequenceVar</a> seq2, <a class="xref" href="../syntax/110_Arrays.html#Arrays_and_array_types__intervalVarArray">intervalVarArray</a> array1, <a class="xref" href="../syntax/110_Arrays.html#Arrays_and_array_types__intervalVarArray">intervalVarArray</a> array2)</code></pre>
</div>
<div class="section" id="sameCommonSubsequence__Parameters"><h2 class="title sectiontitle">Parameters</h2>
<ul class="ul"><li class="li">    <samp class="ph codeph">seq1</samp>, <samp class="ph codeph">seq2</samp>: the two constrained sequence variables.
  </li>
<li class="li">    <samp class="ph codeph">array1</samp>, <samp class="ph codeph">array2</samp>: arrays of interval variables defining the mapping between the two sequence variables.
  </li>
</ul>

</div>
<div class="section" id="sameCommonSubsequence__Description"><h2 class="title sectiontitle">Description</h2>
<p class="p">This function creates a same-common-subsequence constraint between sequence variables <samp class="ph codeph">seq1</samp> and <samp class="ph codeph">seq2</samp>. </p>


<p class="p">If no interval variable array is specified as argument, the sequence variables <samp class="ph codeph">seq1</samp> and <samp class="ph codeph">seq2</samp> should be of the same size and the mapping between interval variables of the two sequences is given by the order of the interval variables in the arrays <samp class="ph codeph">array1</samp> and <samp class="ph codeph">array2</samp> used in the definition of the sequences. </p>


<p class="p">If interval variable arrays <samp class="ph codeph">array1</samp> and <samp class="ph codeph">array2</samp> are used, these arrays define the mapping between interval variables of the two sequences.</p>


<p class="p">The constraint states that the sub-sequences defined by <samp class="ph codeph">seq1</samp> and <samp class="ph codeph">seq2</samp> by only considering the pairs of present intervals (<samp class="ph codeph">array1[i]</samp>,<samp class="ph codeph">array2[i]</samp>) are identical modulo the mapping between intervals <samp class="ph codeph">array1[i]</samp> and <samp class="ph codeph">array2[i]</samp>. </p>


<p class="p">For more information on the <a class="xref" href="sameCommonSubsequence.html" title="This function creates a same-common-subsequence constraint between two sequence variables.">sameCommonSubsequence</a> constraint, see the concept <a class="xref" href="../../../refcppcpoptimizer/html/interval_sequence.html">Interval variable sequencing in CP Optimizer</a>.</p>

</div>
<div class="section" id="sameCommonSubsequence__Example"><h2 class="title sectiontitle">Example</h2>
<p class="p">The example below models a machine MA that produces some items that are then processed by two alternative machines MB1 and MB2. Once the items are produced they are dispatched and send to one of the machine MB1 or MB2 through specific conveyor belt. Items cannot bypass each other on the conveyor belts so if two items are sent to the same machine (MB1 or MB2), they must be processed on this machine in the same order as they were produced on machine MA.</p>


<pre class="pre codeblock"><code>a1 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(size=5);
a2 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(size=7);
a3 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(size=6);
a4 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(size=4);
b1  = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>();
b11 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=11);
b12 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=15);
b2  = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>();
b21 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=16);
b22 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=10);
b3  = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>();
b31 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=15);
b32 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=9);
b4  = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>();
b41 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=13);
b42 = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(optional, size=19);
MA  = <a class="xref" href="sequenceVar.html" title="Creates new sequence variable.">sequenceVar</a>([a1,a2,a3,a4]);
MB1 = <a class="xref" href="sequenceVar.html" title="Creates new sequence variable.">sequenceVar</a>([b11,b21,b31,b41]);
MB2 = <a class="xref" href="sequenceVar.html" title="Creates new sequence variable.">sequenceVar</a>([b12,b22,b32,b42]);
<span class="ph commentemph">// Precedence constraints</span>
<a class="xref" href="endBeforeStart.html" title="Constrains minimum delay between the end of one interval variable and start of another one.">endBeforeStart</a>(a1, b1);
<a class="xref" href="endBeforeStart.html" title="Constrains minimum delay between the end of one interval variable and start of another one.">endBeforeStart</a>(a2, b2);
<a class="xref" href="endBeforeStart.html" title="Constrains minimum delay between the end of one interval variable and start of another one.">endBeforeStart</a>(a3, b3);
<a class="xref" href="endBeforeStart.html" title="Constrains minimum delay between the end of one interval variable and start of another one.">endBeforeStart</a>(a4, b4);
<span class="ph commentemph">// Machine selection</span>
<a class="xref" href="alternative.html" title="Creates an alternative constraint between interval variables.">alternative</a>(b1, [b11,b12]);
<a class="xref" href="alternative.html" title="Creates an alternative constraint between interval variables.">alternative</a>(b2, [b21,b22]);
<a class="xref" href="alternative.html" title="Creates an alternative constraint between interval variables.">alternative</a>(b3, [b31,b32]);
<a class="xref" href="alternative.html" title="Creates an alternative constraint between interval variables.">alternative</a>(b4, [b41,b42]);
<span class="ph commentemph">// Machine can process only one activity at a time</span>
<a class="xref" href="noOverlap.html" title="Constrains a set of interval variables not to overlap each others.">noOverlap</a>(MA);
<a class="xref" href="noOverlap.html" title="Constrains a set of interval variables not to overlap each others.">noOverlap</a>(MB1);
<a class="xref" href="noOverlap.html" title="Constrains a set of interval variables not to overlap each others.">noOverlap</a>(MB2);
<span class="ph commentemph">// No-bypass constraints</span>
<strong class="ph b">sameCommonSubsequence</strong>(MA,MB1);
<strong class="ph b">sameCommonSubsequence</strong>(MA,MB2);
<span class="ph commentemph">// Objective is to minimize the makespan</span>
<a class="xref" href="minimize.html" title="A function to specify an optimization problem. It asks CP Optimizer to seek to minimize the value of an expression.">minimize</a>(<a class="xref" href="max.html" title="Computes the maximum of a pair or array of integer or floating-point expressions.">max</a>([<a class="xref" href="endOf.html" title="Returns the end of specified interval variable.">endOf</a>(b1),<a class="xref" href="endOf.html" title="Returns the end of specified interval variable.">endOf</a>(b2),<a class="xref" href="endOf.html" title="Returns the end of specified interval variable.">endOf</a>(b3),<a class="xref" href="endOf.html" title="Returns the end of specified interval variable.">endOf</a>(b4)]));</code></pre>

<p class="p">An optimal solution to this problem with makespan 31 is the following schedule for the machines:</p>


<ul class="ul"><li class="li">    Machine MA : a4 [0,4) -&gt; a2 [4,11) -&gt; a1 [11,16) -&gt; a3 [16,22)
  </li>
<li class="li">    Machine MB1: b41 [4,17) -&gt; b11 [17,28)
  </li>
<li class="li">    Machine MB2: b22 [11,21) -&gt; b32 [22,31)
  </li>
</ul>

</div>
<div class="section" id="sameCommonSubsequence__Requirements"><h2 class="title sectiontitle">Requirements</h2>
<ul class="ul"><li class="li">    If no interval variable array is specified as an argument, the sequence variables <samp class="ph codeph">seq1</samp> and <samp class="ph codeph">seq2</samp> should be of the same size.
  </li>
<li class="li">    If interval variable arrays <samp class="ph codeph">array1</samp> and <samp class="ph codeph">array2</samp> are used, those two arrays should be of the same size. Array <samp class="ph codeph">array1</samp> must only contain interval variables of sequence <samp class="ph codeph">seq1</samp> without any duplicate and array <samp class="ph codeph">array2</samp> must only contain interval variables of sequence <samp class="ph codeph">seq2</samp> without any duplicate. Note that in this case it is not required that the two sequences have the same size and the arrays can only contain a subset of the interval variables of their respective sequence variables.
  </li>
</ul>

</div>
<div class="section" id="sameCommonSubsequence__Notes"><h2 class="title sectiontitle">Notes</h2>
<p class="p">There are two common use-cases of constraints <a class="xref" href="sameCommonSubsequence.html" title="This function creates a same-common-subsequence constraint between two sequence variables.">sameCommonSubsequence</a> and <a class="xref" href="sameSequence.html" title="This function creates a same-sequence constraint between two sequence variables.">sameSequence</a>:</p>


<ul class="ul"><li class="li">    for modeling no-bypass constraints
  </li>
<li class="li">    for building robust sequences of activities in stochastic scheduling problems by ensuring that, on a given machine, the same sequence of activity is used across different scenarios.
  </li>
</ul>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../CP_Optimizer/reffileformatcpo/functions.html" title="The following functions can be used in a CP Optimizer model file (CPO file):">Functions</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong>:<br />
<div><a class="link" href="sequenceVar.html" title="Creates new sequence variable.">sequenceVar</a></div>
<div><a class="link" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a></div>
<div><a class="link" href="sameSequence.html" title="This function creates a same-sequence constraint between two sequence variables.">sameSequence</a></div>
</div>
<div class="relinfo"><strong>Related information</strong>:<br />
<div><a class="link" href="../../../refcppcpoptimizer/html/interval_sequence.html">Interval variable sequencing in CP Optimizer</a></div>
</div>
</div></body>
</html>