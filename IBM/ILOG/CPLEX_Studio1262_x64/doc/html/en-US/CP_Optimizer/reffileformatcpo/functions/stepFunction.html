<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="© Copyright IBM Corporation 2015" />
<meta name="DC.Rights.Owner" content="© Copyright IBM Corporation 2015" />
<meta name="security" content="public" />
<meta name="Robots" content="index,follow" />
<meta name="DC.Type" content="reference" />
<meta name="DC.Title" content="stepFunction" />
<meta name="abstract" content="Creates a new step function (a function that remains constant within each of a series of adjacent intervals but changes in value from one interval to the next)." />
<meta name="Description" content="Creates a new step function (a function that remains constant within each of a series of adjacent intervals but changes in value from one interval to the next)." />
<meta name="DC.subject" content="stepFunction" />
<meta name="keywords" content="stepFunction" />
<meta name="DC.Relation" scheme="URI" content="intervalVar.html" />
<meta name="DC.Relation" scheme="URI" content="forbidStart.html" />
<meta name="DC.Relation" scheme="URI" content="forbidEnd.html" />
<meta name="DC.Relation" scheme="URI" content="forbidExtent.html" />
<meta name="DC.Relation" scheme="URI" content="../../../CP_Optimizer/reffileformatcpo/functions.html" />
<meta name="DC.Date" scheme="iso8601" content="2015-05-15" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="stepFunction" />
<meta name="DC.Language" content="en-us" />
<meta name="IBM.Country" content="ZZ" />
<!-- Licensed Materials - Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel="stylesheet" type="text/css" href="../../.././ibmdita.css" />
<link rel="stylesheet" type="text/css" href="../../.././swg_info_common_opti.css" />
<link rel="Start" href="../../../CP_Optimizer/reffileformatcpo/functions.html" />
<title>stepFunction</title>
</head>
<body role="main" id="stepFunction">
<h1 class="title topictitle1">stepFunction</h1>
<div class="body refbody"><p class="shortdesc">Creates a new step function (a function that remains constant within each of a
series of adjacent intervals but changes in value from one interval to the next).</p>
<div class="section" id="stepFunction__Syntax"><h2 class="title sectiontitle">Syntax</h2>

<div class="imageleft"><img class="image syntaxdiagram" src="../diagrams/diagram14.png" /></div>
</div>
<div class="section" id="stepFunction__Parameters"><h2 class="title sectiontitle">Parameters</h2>
<p class="p">Comma separated list of pairs <samp class="ph codeph">(start, <a class="xref" href="../search/060_intValueEval.html" title="The list of integer value evaluators.">value</a>)</samp> sorted by <samp class="ph codeph">start</samp>. Each pair
corresponds with an interval where the function is constant (a step of the
function). The function has constant value <samp class="ph codeph"><a class="xref" href="../search/060_intValueEval.html" title="The list of integer value evaluators.">value</a></samp> from <samp class="ph codeph">start</samp> until the next
step. Parameter <samp class="ph codeph">start</samp> is <samp class="ph codeph"><a class="xref" href="../syntax/070_Types.html#Numerical_types__sint">sint</a></samp> (allowed range <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a>..<a class="xref" href="../syntax/040_Constants.html#Constants__intervalmax">intervalmax</a></samp>),
parameter <samp class="ph codeph"><a class="xref" href="../search/060_intValueEval.html" title="The list of integer value evaluators.">value</a></samp> is <samp class="ph codeph"><a class="xref" href="../syntax/070_Types.html#Numerical_types__uint">uint</a></samp> (allowed range <samp class="ph codeph">0..<a class="xref" href="../syntax/040_Constants.html#Constants__intmax">intmax</a></samp>).</p>


<p class="p">To simplify code generation, a trailing comma at the end of non-empty list is
allowed.</p>

</div>
<div class="section" id="stepFunction__Description"><h2 class="title sectiontitle">Description</h2>
<p class="p">The function <samp class="ph codeph"><a class="xref" href="../syntax/130_MoreTypes.html#More_types__Type_stepFunction">stepFunction</a></samp> creates a new function with the specified steps. Each
step starts at the specified <samp class="ph codeph">start</samp> time and ends just before the <samp class="ph codeph">start</samp> of the
next step.</p>


<p class="p">The function is always defined on interval <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a>..<a class="xref" href="../syntax/040_Constants.html#Constants__intervalmax">intervalmax</a></samp>. If the
first step does not start at <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a></samp> then the function is 0 from
<samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a></samp> until the <samp class="ph codeph">start</samp> of the first step. The last step ends at
<samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmax">intervalmax</a></samp>, that is, the function is defined for <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmax">intervalmax</a></samp>.</p>


<p class="p">Use <samp class="ph codeph"><a class="xref" href="../syntax/130_MoreTypes.html#More_types__Type_stepFunction">stepFunction</a></samp> to express intensity of a work during <samp class="ph codeph"><a class="xref" href="../syntax/070_Types.html#Variable_types__intervalVar">intervalVar</a></samp>, or to
forbid <samp class="ph codeph"><a class="xref" href="../syntax/070_Types.html#Variable_types__intervalVar">intervalVar</a></samp> to start/stop or extent certain intervals using constraints
<samp class="ph codeph"><a class="xref" href="forbidStart.html" title="Forbid an interval variable to start during specified regions.">forbidStart</a></samp>, <samp class="ph codeph"><a class="xref" href="forbidEnd.html" title="Forbid an interval variable to end during specified regions.">forbidEnd</a></samp> and <samp class="ph codeph"><a class="xref" href="forbidExtent.html" title="Forbid an interval variable to overlap with specified regions.">forbidExtent</a></samp>.</p>

</div>
<div class="section" id="stepFunction__Example"><h2 class="title sectiontitle">Example</h2>
<p class="p">The following two functions are equivalent because the function is always zero
from <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a></samp> until the first step:</p>


<pre class="pre codeblock"><code>f = <strong class="ph b">stepFunction</strong>((<a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a>, 0), (3, 100), (10, 60), (15, 80));
g = <strong class="ph b">stepFunction</strong>(                  (3, 100), (10, 60), (15, 80));</code></pre>

<p class="p">Here is a graph of the both functions:</p>



<div class="imageleft"><img class="image syntaxdiagram" src="../diagrams/diagram15.png" /></div>
</div>
<div class="section" id="stepFunction__Example2"><h2 class="title sectiontitle">Example</h2>
<p class="p">The following function represents working days during three weeks. Its value is
0 during weekends and 100 during working days.</p>


<pre class="pre codeblock"><code>workingDays = <strong class="ph b">stepFunction</strong>((0, 100), (5, 0), (7, 100), (12, 0), (14, 100), (19, 0));</code></pre>

<p class="p">Here is graphical representation of the function:</p>



<div class="imageleft"><img class="image syntaxdiagram" src="../diagrams/diagram16.png" /></div>

<p class="p">Such function can be used as intensity to express that a task takes (for
example) 5 days however weekends do not count:</p>


<pre class="pre codeblock"><code>d = <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">intervalVar</a>(size=5, end=0..21, intensity=workingDays);</code></pre>

<p class="p">Possible solution then can be that the work starts on Thursday and ends on
Wednesday next week:</p>



<div class="imageleft"><img class="image syntaxdiagram" src="../diagrams/diagram17.png" /></div>

<p class="p">However another possible solution is that the work starts (suspended) on Sunday
and ends on next Sunday (again suspended):</p>



<div class="imageleft"><img class="image syntaxdiagram" src="../diagrams/diagram18.png" /></div>

<p class="p">Such a solution is usually not desired. In this case it is also necessary to
forbid the interval to start or end during a weekend using constraints
<samp class="ph codeph"><a class="xref" href="forbidStart.html" title="Forbid an interval variable to start during specified regions.">forbidStart</a></samp> and <samp class="ph codeph"><a class="xref" href="forbidEnd.html" title="Forbid an interval variable to end during specified regions.">forbidEnd</a></samp>:</p>


<pre class="pre codeblock"><code><a class="xref" href="forbidStart.html" title="Forbid an interval variable to start during specified regions.">forbidStart</a>(d, workingDays);
<a class="xref" href="forbidEnd.html" title="Forbid an interval variable to end during specified regions.">forbidEnd</a>(d, workingDays);</code></pre>
</div>
<div class="section" id="stepFunction__Requirements"><h2 class="title sectiontitle">Requirements</h2>
<ul class="ul"><li class="li">    The segments must be sorted in ascending order by <samp class="ph codeph">start</samp>.
  </li>
<li class="li">    Two segments with the same <samp class="ph codeph">start</samp> value are not allowed.
  </li>
</ul>

</div>
<div class="section" id="stepFunction__Notes"><h2 class="title sectiontitle">Notes</h2>
<ul class="ul"><li class="li">    When no step is specified then the function has value 0 over the whole range
    <samp class="ph codeph"><a class="xref" href="../syntax/040_Constants.html#Constants__intervalmin">intervalmin</a>..<a class="xref" href="../syntax/040_Constants.html#Constants__intervalmax">intervalmax</a></samp>.
  </li>
<li class="li">    If the function is used as an intensity of an interval variable then its
    value must be within range <samp class="ph codeph">0..granularity</samp> (<samp class="ph codeph">granularity</samp> is 100 by
    default).
  </li>
<li class="li">    There is no expression to actually evaluate the step function. The step
    function is meant to be passed as an argument to constraints <samp class="ph codeph"><a class="xref" href="forbidStart.html" title="Forbid an interval variable to start during specified regions.">forbidStart</a></samp>,
    <samp class="ph codeph"><a class="xref" href="forbidEnd.html" title="Forbid an interval variable to end during specified regions.">forbidEnd</a></samp>, <samp class="ph codeph"><a class="xref" href="forbidExtent.html" title="Forbid an interval variable to overlap with specified regions.">forbidExtent</a></samp> or as an intensity argument to
    <a class="xref" href="intervalVar.html" title="Creates a new interval variable.">function {intervalVar}</a>.
  </li>
</ul>

</div>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../../../CP_Optimizer/reffileformatcpo/functions.html" title="The following functions can be used in a CP Optimizer model file (CPO file):">Functions</a></div>
</div>
<div class="relinfo relref"><strong>Related reference</strong>:<br />
<div><a class="link" href="intervalVar.html" title="Creates a new interval variable.">function <samp class="ph codeph">intervalVar</samp></a></div>
<div><a class="link" href="forbidStart.html" title="Forbid an interval variable to start during specified regions.">forbidStart</a></div>
<div><a class="link" href="forbidEnd.html" title="Forbid an interval variable to end during specified regions.">forbidEnd</a></div>
<div><a class="link" href="forbidExtent.html" title="Forbid an interval variable to overlap with specified regions.">forbidExtent</a></div>
</div>
</div></body>
</html>